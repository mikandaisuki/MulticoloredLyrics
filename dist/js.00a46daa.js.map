{"version":3,"sources":["js/Block.js","js/Empty.js","js/SpiralScan.js","js/drawGrid.js","js/Grid.js","js/SizingBlock.js","js/WordBlock.js","js/PhraseBlock.js","js/Ball.js","js/index.js","../../.nodebrew/node/v18.3.0/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Block","p","charOb","x","y","col","char","parent","blockSize","posX","posY","startTime","endTime","isDisplayed","push","translate","noStroke","fill","rect","pop","textSize","text","bottom","rad","radians","rotate","Empty","initPos","Array","row_poses","col_poses","key_row_poses","key_col_poses","rowleng","colleng","s","isKey","pos","which","sort","a","b","num","length","SpiralScan","startX","startY","now","d","isFirst","direct","d0","drawGrid","width","height","row","size","strokeWeight","stroke","noFill","i","line","sizelistTo2Darray_N","sizelist","yleng","Math","max","xleng","reduce","sum","res","insertNum","count","sizelistTo2Darray_E","j","sizelistTo2Darray_W","arr","reverse","sizelistTo2Darray_S","Grid","canvasW","canvasH","w","h","centerPos","floor","console","log","grid","empty","setInitFill","spiralScan","deleteZero","setEmpty","tmp","t","color","ellipse","getCoord","splice","e","setPos","textleng","withinPos","withinRowleng","withinColleng","index","random","l","hash","allAngleArray","getAllAngleArray","reservedPos","outerReserve","n","scanGrid","used","rotationList","Object","keys","filter","indexOf","targetArr","ty","tx","tmpY","ok","isLoop","startPos","endPos","slice","isEqual","reserved","makeAarray","dir","sortDataBy","array","sizedPos","increment","leng","split","num1","num2","array1","array2","a1","position","wordBlocks","activeGrid","getGridSize","minX","maxX","minY","maxY","sizeX","sizeY","abs","result","_posInGrid","TextAliveApp","Ease","SizingBlock","posArray","globalBlockSize","calcPos","alpha","displayTime","isChorus","getIsChorus","chorusX","chorusY","isFinite","angle","distRad","preAngle","isSetChorusPos","posX_chorus","posY_chorus","size_chorus","alpha_chorus","col_chorus","col_chorusOut","progress","time_fadein","eased","quintIn","r","constrain","min","chorus","c","al","setAlpha","blendMode","EXCLUSION","WordBlock","g","wordObArray","charArray","makeSizeList","aArray","SearchGridBySizeable","dirA","blocks","displayChildrenCount","isDisplayAll","children","charObArray","posInGrid","makePosInGrid","makeBlock","setFilled","poses","colPoses","rowPoses","keyPoses","keyColPoses","keyRowPoses","keyPos","keyindex","previndex","nextindex","seq","displayTextRotate","regexp","test","xarray","yarray","originX","originY","PhraseBlock","phrase","textArr","setArrByPartOfSpeech","includes","setArrByPunct","setArrByText","phraseleng","makeWordBlock","display","words","textArray","isA","tempAtext","tempAob","word","textA","obA","tmpText","tmpOb","o","startIndex","endIndex","isStart","newA","no","ob","Ball","posXarray","posYarray","sizeArray","randomGaussian","LIGHTEST","circle","P5","p5","Player","player","app","token","mediaBannerPosition","mediaElement","document","querySelector","valenceArousalEnabled","vocalAmplitudeEnabled","addListener","onTimeUpdate","onVideoReady","onAppReady","animatePhrase","unit","contains","textContent","animateWord","animateChar","createFromSongUrl","phrases","sabi","songInfo","v","video","data","songMap","segments","segments_contenst","element","String","duration","song","name","permalink","artist","firstPhrase","animate","next","firstWord","firstChar","findBeat","findChord","findChorus","getValenceArousal","getVocalAmplitude","findPhrase","findWord","findChar","time_fadeout","u","centerx","centery","block","showGrid","b2","init","phraseBlocks","testBlocks","worldCamera","autoCamera","zoomCamera","myFont","chorusList","currentChorus","chorusIndex","chorusSize","yarimasuta","balls","preload","setup","createCanvas","window","innerHeight","textFont","rectMode","CENTER","textAlign","colorMode","HSB","frameRate","Camera","draw","timer","cou","_wordBlocks","_blocks","AutoCamera","ZoomCamera","background","beat","getActiveGridSize","_isInit","update","_x","_y","scale","zoom","isInit","setInit","_startTime","_endTime","setChorusPos","_posX_chorus","_posY_chorus","updateChorus_fadeIn","displayChorusText","_isDisplayed","displayText","update_fadein","drawMulti","mousePressed","mouseX","mouseY","innerWidth","selectGridPos","toString","getText","keyPressed","key","mouseDragged","createVector","_zoom","distScale","distX","distY","preScale","xsize","ysize","moveTime","preX","quintOut","preY","bool","distSet","stopTime","isMove","moveLimit","isEnd","quickMove","_posX","_posY","limitSet","currentBlock","limit","tmpIndex","nextBlock","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"..","sourcesContent":["export class Block {\n  constructor(p, charOb, x, y, col, char, parent) {\n    this.p = p;\n    this.charOb = charOb;\n    this.blockSize = 100;\n    this.x = x;\n    this.posX = (this.x * this.blockSize) + (this.blockSize / 2);\n    this.y = y;\n    this.posY = (this.y * this.blockSize) + (this.blockSize / 2);\n    this.col = col;\n    this.char = char;\n    this.parent = parent;\n    //console.log(\"-----this is Block-----\");\n    this.startTime = charOb.startTime;\n    this.endTime = charOb.endTime;\n/*\n    console.log(char);\n    console.log(\"startTime : \" + this.startTime);\n    console.log(\"endTime : \" + this.endTime);\n    */\n    this.isDisplayed = false;\n  }\n\n  display() {\n    const p = this.p;\n    p.push();\n    p.translate(this.posX, this.posY);\n    p.noStroke();\n    p.fill(this.col);\n    p.rect(0, 0, this.blockSize, this.blockSize);\n    p.pop();\n  }\n\n  displayText() {\n    const p = this.p;\n    p.textSize(100);\n    p.push();\n    p.translate(this.posX, this.posY);\n    p.noStroke();\n    p.fill(this.col);\n    p.text(this.char, 0, 0);\n    p.pop();\n    this.isDisplayed = true;\n  }\n\n  displayTextRotate(bottom) {\n    const p = this.p;\n    let rad;\n    switch(bottom) {\n      case 'B':\n        rad = 0;\n        break;\n      case 'T':\n        rad = p.radians(180);\n        break;\n      case 'L':\n        rad = p.radians(90);\n        break;\n      case 'R':\n        rad = p.radians(-90);\n        break;\n    }\n    p.textSize(100);\n    p.push();\n    p.translate(this.posX, this.posY);\n    p.rotate(rad);\n    p.noStroke();\n    p.fill(this.col);\n    p.text(this.char, 0, 0);\n    p.pop();\n  }\n\n  get X() {\n    return this.x;\n  }\n  get Y() {\n    return this.y;\n  }\n  get _startTime() {\n    return this.startTime;\n  }\n  get _endTime() {\n    return this.endTime;\n  }\n  get _isDisplayed() {\n    return this.isDisplayed;\n  }\n}\n","export class Empty {\n  constructor(y, x) {\n    this.initPos = new Array(2);\n    this.initPos[0] = x;\n    this.initPos[1] = y;\n    this.row_poses = new Array();\n    this.row_poses.push(this.initPos);\n    this.col_poses = new Array();\n    this.col_poses.push(this.initPos);\n    this.key_row_poses = new Array();\n    this.key_row_poses.push(this.initPos);\n    this.key_col_poses = new Array();\n    this.key_col_poses.push(this.initPos);\n\n    this.rowleng = 0;\n    this.colleng = 0;\n  }\n\n  setPos(y, x, s, isKey) {\n    const pos = new Array(2);\n    pos[0] = x;\n    pos[1] = y;\n    if(s === 'row') {\n      if(isKey) this.key_row_poses.push(pos);\n      this.row_poses.push(pos);\n    } else if(s === 'col') {\n      if(isKey) this.key_col_poses.push(pos);\n      this.col_poses.push(pos);\n    }\n  }\n\n  sortDataBy(which) {\n    if(which === 'row') {\n      this.row_poses.sort(function(a, b) {\n        return a[0] - b[0];\n      });\n    } else if(which === 'col') {\n      this.col_poses.sort(function(a, b) {\n        return a[1] - b[1];\n      });\n    }\n  }\n\n  withinRowleng(num) {\n    if(num <= this.row_poses.length) return true;\n    else return false;\n  }\n  withinColleng(num) {\n    if(num <= this.col_poses.length) return true;\n    else return false;\n  }\n\n  get rowPoses() {\n    return this.row_poses;\n  }\n  get colPoses() {\n    return this.col_poses;\n  }\n  get keyRowPoses() {\n    return this.key_row_poses;\n  }\n  get keyColPoses() {\n    return this.key_col_poses;\n  }\n}\n","export class SpiralScan {\n  constructor(startX, startY) {\n    this.length = 1;\n    this.now = 1;\n    this.d = 1;\n    this.isFirst = true;\n    this.direct = ['N', 'E', 'S', 'W'];\n    //this.n = (this.w) * (this.h) -1;\n    this.x = startX;\n    this.y = startY;\n  }\n\n  scanGrid() {\n    const d0 = this.direct[this.d % 4];\n    if(d0 == 'N') {\n      this.y--;\n    } else if(d0 == 'S') {\n      this.y++;\n    } else if(d0 == 'E') {\n      this.x++;\n    } else if(d0 == 'W') {\n      this.x--;\n    }\n    this.length--;\n\n    if(!this.isFirst && this.length == 0) {\n      this.isFirst = true;\n      this.now++;\n      this.length = this.now;\n      this.d++;\n    } else if(this.length == 0) {\n      this.length = this.now;\n      this.isFirst = false;\n      this.d++;\n    }\n  }\n  \n  get _x() {\n    return this.x;\n  }\n  get _y() {\n    return this.y;\n  }\n}\n","export const drawGrid = (p, width, height) => {\n  const col = height / 100;\n  const row = width / 100;\n  const size = 100;\n  p.strokeWeight(1);\n  p.stroke(255);\n  p.noFill();\n  for (let i = 0; i <  row; i++) {\n    p.line(i * size, 0, i * size, col * size);\n  }\n\n  for (let i = 0; i < col; i++) {\n    p.line(0, i * size, row * size, i * size);\n  }\n};\n\n//テキストサイズの配列から二次元配列へ\n//row bottom\nexport const sizelistTo2Darray_N = sizelist => {\n  const yleng = Math.max(...sizelist);\n  const xleng = sizelist.reduce((sum, num) => sum + num, 0);\n  const res = new Array(yleng);\n  for(let y = 0; y < yleng; y++) {\n    res[y] = new Array();\n  }\n\n  for(let y = 0; y < yleng; y++) {\n    for(let i = 0; i < sizelist.length; i++) {\n      const insertNum = 0;\n      if((res.length - y) <= sizelist[i]) insertNum = 5;\n      let count = 0;\n      while(count < sizelist[i]) {\n        res[y].push(insertNum);\n        count++;\n      }\n    }\n  }\n  return res;\n};\n\n//col left\nexport const sizelistTo2Darray_E = sizelist => {\n  const yleng = sizelist.reduce((sum, num) => sum + num, 0);\n  const xleng = Math.max(...sizelist);\n\n  const res = new Array(yleng);\n  for(let y = 0; y < yleng; y++) {\n    res[y] = new Array();\n  }\n\n  let col = 0;\n  for(let i = 0; i < sizelist.length; i++) {\n    const num = sizelist[i];\n    for(let j = 0; j < num; j++) {\n      let count = 0;\n      while(count < xleng) {\n        let insertNum = 0;\n        if(count < num) insertNum = 5;\n        res[col].push(insertNum);\n        count++;\n      }\n      col++\n    }\n  }\n  return res;\n};\n\n//col right\nexport const sizelistTo2Darray_W = sizelist => {\n  const arr = sizelistTo2Darray_E(sizelist);\n  //const arr = sizelist_E;\n  for(let i of arr) {\n    i.reverse();\n  }\n  arr.reverse();\n  return arr;\n};\n\n//row top\nexport const sizelistTo2Darray_S = sizelist => {\n  const arr = sizelistTo2Darray_N(sizelist);\n  //const arr = sizelist_N;\n  for(let i of arr) {\n    i.reverse();\n  }\n  arr.reverse();\n  return arr;\n};\n","import { Empty } from './Empty';\nimport { SpiralScan } from './SpiralScan';\nimport { sizelistTo2Darray_N, sizelistTo2Darray_E, sizelistTo2Darray_W, sizelistTo2Darray_S } from './drawGrid';\n\nexport class Grid {\n  constructor(p, canvasW, canvasH) {\n    this.p = p;\n\n    //グリッドの大きさを指定\n    this.canvasW = canvasW;\n    this.canvasH = canvasH;\n    //グリッドからマス目\n    this.w = this.canvasW / 100;\n    this.h = this.canvasH / 100;\n    this.centerPos = [ Math.floor(this.w / 2), Math.floor(this.h / 2)];\n\n    console.log(\"center is\" + this.centerPos);\n    this.grid = new Array(this.h);\n    for(let y = 0; y < this.h; y++) {\n      this.grid[y] = new Array(this.w).fill(0);\n    }\n    this.empty = new Array();\n    this.setInitFill();\n\n    this.spiralScan = new SpiralScan(this.centerPos[0], this.centerPos[1]);\n  }\n\n  setInitFill() {\n    this.grid[this.centerPos[1]][this.centerPos[0]] = 1;\n    //this.printGrid();\n    this.deleteZero();\n    this.setEmpty();\n    //this.printGrid();\n    //this.searchGrid();\n    //this.printEmpty();\n    //console.log(this.empty);\n  }\n\n  setFilled(x, y) {\n    this.grid[y][x] = 1;\n  }\n\n  setEmpty() {\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        if(this.grid[y][x] == 1) {\n          let tmp = 0;\n          //上方向の空白マス\n          tmp = y - 1;\n          while(0 <= tmp) {\n            if(this.grid[tmp][x] == 1) {\n              break;\n            } else if(y - tmp == 1) {\n              this.grid[tmp][x] = 3;\n            } else if(this.grid[tmp][x] == 3) {\n              this.grid[tmp][x] = 3;\n            } else {\n              this.grid[tmp][x] = 2;\n            }\n            tmp--;\n          }\n\n          tmp = y + 1;\n          //下方向の空白マス\n          while(tmp < this.h) {\n            if(this.grid[tmp][x] == 1) {\n              break;\n            } else if(tmp - y == 1) {\n              this.grid[tmp][x] = 3;\n            } else if(this.grid[tmp][x] == 3) {\n              this.grid[tmp][x] = 3;\n            } else {\n              this.grid[tmp][x] = 2;\n            }\n            tmp++;\n          }\n\n          tmp = x - 1;\n          //左方向の空白マス\n          while (0 <= tmp) {\n            if(this.grid[y][tmp] == 1) {\n              break;\n            } else if(x - tmp == 1) {\n              this.grid[y][tmp] = 3;\n            } else if(this.grid[y][tmp] == 3) {\n              this.grid[y][tmp] = 3;\n            } else {\n              this.grid[y][tmp] = 2;\n            }\n            tmp--;\n          }\n\n          tmp = x + 1;\n          //右方向の空白マス\n          while (tmp < this.w) {\n            if(this.grid[y][tmp] == 1) {\n              break;\n            } else if(tmp - x == 1) {\n              this.grid[y][tmp] = 3;\n            } else if(this.grid[y][tmp] == 3) {\n              this.grid[y][tmp] = 3;\n            } else {\n              this.grid[y][tmp] = 2;\n            }\n            tmp++;\n          }\n\n        }\n      }\n    }\n  }\n\n  printGrid() {\n    let t = \"\";\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        t += \"|\" + this.grid[y][x];\n      }\n      t += \"\\n\";\n    }\n    console.log(t);\n  }\n\n  displayPoint() {\n    const p = this.p;\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        if (this.grid[y][x] != 1 && this.grid[y][x] != 0) {\n          if(this.grid[y][x] == 2) {\n            p.noStroke();\n            p.fill(p.color(0, 0, 255));\n            p.ellipse(this.getCoord(x), this.getCoord(y), 10, 10);\n          } else if(this.grid[y][x] == 3) {\n            p.noStroke();\n            p.fill(p.color(255, 0, 0));\n            p.ellipse(this.getCoord(x), this.getCoord(y), 10, 10);\n          }\n        }\n      }\n    }\n  }\n\n  searchGrid() {\n    this.empty.splice(0);\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        if(this.grid[y][x] == 3) {\n          const e = new Empty(y, x);\n\n          let tmp = 0;\n          let s = \"\";\n\n          s = \"col\";\n          //上方向\n          tmp = y - 1;\n          while(0 <= tmp) {\n            if(this.grid[tmp][x] == 1) {\n              break;\n            } else if(this.grid[tmp][x] == 2) {\n              e.setPos(tmp, x, s, false);\n            } else if(this.grid[tmp][x] == 3) {\n              e.setPos(tmp, x, s, true);\n            }\n            tmp--;\n          }\n          //下方向\n          tmp = y + 1;\n          while(tmp < this.h) {\n            if(this.grid[tmp][x] == 1) {\n              break;\n            } else if(this.grid[tmp][x] == 2) {\n              e.setPos(tmp, x, s, false);\n            } else if(this.grid[tmp][x] == 3) {\n              e.setPos(tmp, x, s, true);\n            }\n            tmp++;\n          }\n\n          s = \"row\";\n          //左方向\n          tmp = x - 1;\n          while (0 <= tmp) {\n            if(this.grid[y][tmp] == 1) {\n              break;\n            } else if(this.grid[y][tmp] == 2) {\n              e.setPos(y, tmp, s, false);\n            } else if(this.grid[y][tmp] == 3) {\n              e.setPos(y, tmp, s, true);\n            }\n            tmp--;\n          }\n          //右方向の空白\n          tmp = x + 1;\n          while (tmp < this.w) {\n            if(this.grid[y][tmp] == 1) {\n              break;\n            } else if(this.grid[y][tmp] == 2) {\n              e.setPos(y, tmp, s, false);\n            } else if(this.grid[y][tmp] == 3) {\n              e.setPos(y, tmp, s, true);\n            }\n            tmp++;\n          }\n\n          this.empty.push(e);\n        }\n      }\n    }\n  }\n\n  deleteZero() {\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        if(this.grid[y][x] == 0) this.grid[y][x] = 2;\n      }\n    }\n  }\n\n  getEmptyPoses(textleng, which) {\n    let withinPos = new Array();\n    for(let e of this.empty) {\n      if(which === 'row') {\n        if(e.withinRowleng(textleng)) withinPos.push(e);\n      } else if(which === 'col') {\n        if(e.withinColleng(textleng)) withinPos.push(e);\n      }\n    }\n    const index = Math.floor(Math.random() * withinPos.length);\n    const res = withinPos[index];\n\n    return res;\n  }\n\n  getCoord(num) {\n    return (num * 100) + 50;\n  }\n\n  printEmpty() {\n    console.log(\"this is print empty : row\");\n    for(const l of this.empty) {\n      console.log(l.row_poses);\n    }\n    console.log(\"this is print empty : col\");\n    for(const l of this.empty) {\n      console.log(l.col_poses);\n    }\n  }\n\n  getAllAngleArray(sizelist) {\n    const hash = {};\n    hash['N'] = sizelistTo2Darray_N(sizelist);\n    hash['E'] = sizelistTo2Darray_E(sizelist);\n    hash['W'] = sizelistTo2Darray_W(sizelist);\n    hash['S'] = sizelistTo2Darray_S(sizelist);\n    return hash;\n\n    /*\n    const arr = new Array();\n    arr.push(sizelistTo2Darray_N(sizelist));\n    console.log(\"N : \"+arr[0]);\n    arr.push(sizelistTo2Darray_E(sizelist));\n    console.log(\"E : \"+arr[1]);\n    arr.push(sizelistTo2Darray_W(arr[1]));\n    console.log(\"W : \"+arr[2]);\n    arr.push(sizelistTo2Darray_S(arr[0]));\n    console.log(\"S : \"+arr[3]);\n    return arr;\n    */\n  }\n\n  SearchGridBySizeable(text, sizelist) {\n    //console.log(\"this is testSearchGrid\");\n    const allAngleArray = this.getAllAngleArray(sizelist);\n    let reservedPos = new Array();\n    let outerReserve = new Array();\n    let n = (this.w) * (this.h) -1;\n    for(let i = 0; i < n; i++) {\n      this.spiralScan.scanGrid();\n      const y = this.spiralScan.y;\n      const x = this.spiralScan.x;\n      if(y < 0 || y >= this.h ||x < 0 || x >= this.w) continue;\n      if(this.grid[y][x] == 3) {\n        //ターゲットを走査\n        const used = new Array();\n        let rotationList = ['N', 'E', 'W', 'S'];\n        //let rotation;\n\n        let num = 0;\n        while(num < Object.keys(allAngleArray).length) {\n          if(!used.length) rotationList = rotationList.filter(i => used.indexOf(i) == -1);\n          const index = Math.floor(Math.random() * rotationList.length);\n          const targetArr = allAngleArray[rotationList[index]];\n          for(let ty = 0; ty < targetArr.length; ty++) {\n            for(let tx = 0; tx < targetArr[ty].length; tx++) {\n              if(targetArr[ty][tx] == 5) {\n                let tmpY = y;\n                let ok = 0;\n                let arr;\n                let isLoop = true;\n\n                if(ty > 0) {\n                  tmpY = tmpY - ty;\n                }\n                //reservedPos.splice(0);\n                let reservedPos = new Array();\n\n                while(ok < targetArr.length) {\n                  const startPos = x - tx;\n                  const endPos = x + (targetArr[ty].length - tx );\n                  if(tmpY < 0 || tmpY+ok >= this.h) break;\n                  if(endPos > this.w) break;\n                  arr = this.grid[ tmpY + ok ].slice(startPos, endPos);\n                  if(arr.length == 0)  break;\n                  /*\n                  if(text === '掛け替えの' || text === '鳴り響け'　|| text === 'Memory') {\n                    console.log(text+ \" \"+arr);\n                  }\n                  */\n                  for(let n = 0; n < arr.length; n++) {\n                    const res = this.isEqual(arr[n], targetArr[ok][n]);\n                    if(res == -1) {\n                      continue;\n                    } else if(res == 0) {\n                      isLoop = false;\n                      break;\n                    } else if(res == 1) {\n                      const t = [ tmpY + ok, startPos + n];\n                      reservedPos.push(t);\n                    }\n                  }\n                  if(!isLoop) break;\n                  ok++;\n                }\n                if(ok == targetArr.length) { //入るマスが見つかった状態\n                  if(reservedPos.length == 0) {\n                    console.log(\"から！！！！\");\n                    console.log(ok);\n                    console.log(arr);\n                  }\n                  //console.log(reservedPos);\n                  const reserved = this.makeAarray(index, reservedPos, text, sizelist);\n                  //outerReserve.push(reserved);\n                  return reserved;\n                }\n              }\n            }\n          }\n          used.push(index);\n          num++;\n        }\n        //return outerReserve;\n      }\n    }\n    //return outerReserve;\n  }\n\n  makeAarray(index, reservedPos, text, sizelist) {\n    let dir = '';\n    switch(index) {\n      case 0:\n        dir = 'N';\n        break;\n      case 1:\n        dir = 'E';\n        break;\n      case 2:\n        dir = 'W';\n        break;\n      case 3:\n        dir = 'S';\n        break;\n    }\n    const reserved = this.sortDataBy(dir, reservedPos, sizelist, text);\n    return reserved;\n  }\n\n  sortDataBy(dir, array, sizelist, text) {\n    //console.log(\"sortDataBy です\");\n    //console.log(array);\n    //文字方向によってソート順を変える\n    if(dir === 'N') {\n      array.sort(function(a, b) {\n        return a[1] - b[1];\n      });\n    } else if(dir === 'S') {\n      array.sort(function(a, b) {\n        return b[1] - a[1];\n      });\n    } else if(dir === 'E') {\n      array.sort(function(a, b) {\n        return a[0] - b[0];\n      });\n    } else if(dir === 'W') {\n      array.sort(function(a, b) {\n        return b[0] - a[0];\n      });\n    }\n\n    const sizedPos = new Array();\n    let increment = 0;\n    for(const size of sizelist) {\n      const leng = increment + size * size;\n      sizedPos.push(array.slice(increment, leng));\n      increment = leng;\n    }\n    const res = new Array();\n    //連想配列をつくる\n    for(let i = 0; i < sizelist.length; i++) {\n      res.push({text: text.split('')[i], dir: dir, size: sizelist[i], pos: sizedPos[i]});\n    }\n\n    return res;\n  }\n\n  isEqual(num1, num2) {\n    if(num2 == 0) return -1;\n    if(num1 == 3 || num1 == 2) num1 = 5;\n    if(num1 == num2) return 1;\n    return 0;\n  }\n\n  isEqualArray(array1, array2) {\n    let i = array1.length;\n    if(i != array2.length) return false;\n    while(i--) {\n      const a1 = array1[i];\n      if(array2[i] == 0) continue;\n      if(a1 == 3 || a1 == 2) array1[i] = 5;\n      if(array1[i] !== array2[i]) return false;\n    }\n    return true;\n  }\n\n  getActiveGridSize(position, wordBlocks) {\n    const activeGrid = new Array(this.h);\n    for(let y = 0; y < this.h; y++) {\n      activeGrid[y] = new Array(this.w).fill(0);\n    }\n\n    const getGridSize = grid => {\n      const xleng = { minX: grid[0].length, maxX: 0 };\n      const yleng = { minY: grid.length, maxY: 0 };\n      for(let y = 0; y < grid.length; y++) {\n        for(let x = 0; x < grid[y].length; x++) {\n          if(grid[y][x] == 1) {\n            if(x < xleng['minX']) xleng['minX'] = x;\n            if(x > xleng['maxX']) xleng['maxX'] = x;\n            if(y < yleng['minY']) yleng['minY'] = y;\n            if(y > yleng['maxY']) yleng['maxY'] = y;\n          }\n        }\n      }\n      let sizeX = 0;\n      let sizeY = 0;\n      //中心からの距離が長い方を抽出\n      if(Math.abs(this.centerPos[0] - xleng['minX']) < Math.abs(this.centerPos[0] - xleng['maxX'])) {\n        sizeX = Math.abs(this.centerPos[0] - xleng['maxX']) * 2;\n      } else {\n        sizeX = Math.abs(this.centerPos[0] - xleng['minX']) * 2;\n      }\n      if(Math.abs(this.centerPos[1] - yleng['minY']) < Math.abs(this.centerPos[1] - yleng['maxY'])) {\n        sizeY = Math.abs(this.centerPos[1] - yleng['maxY']) * 2;\n      } else {\n        sizeY = Math.abs(this.centerPos[1] - yleng['minY']) * 2;\n      }\n      const result = { sizeX: sizeX, sizeY: sizeY };\n      return result;\n    };\n\n    for(const w of wordBlocks) {\n      if(w.startTime < position) {\n        for(const pos of w._posInGrid) {\n          activeGrid[pos[0]][pos[1]] = 1;\n        }\n      }\n    }\n    //this.printActiveGrid(activeGrid);\n    return getGridSize(activeGrid);\n  }\n\n  printActiveGrid(grid) {\n    let t = \"\";\n    for(let y = 0; y < grid.length; y++) {\n      for(let x = 0; x < grid[0].length; x++) {\n        t += \"|\" + grid[y][x];\n      }\n      t += \"\\n\";\n    }\n    console.log(t);\n  }\n}\n","import { chorus } from './index.js';\nimport { canvasW, canvasH } from './index.js';\nimport { globalBlockSize, time_fadein, time_fadeout } from './index.js';\nconst { Ease } = TextAliveApp;\n\n\nexport class SizingBlock {\n  constructor(p, charOb, size, dir, posArray, col, parent) {\n    this.p = p;\n    this.charOb = charOb;\n\n    this.blockSize = size * globalBlockSize;\n    this.char = charOb.text;\n    this.posArray = posArray;\n    this.posX = 0;\n    this.posY = 0;\n    this.calcPos();\n\n    this.alpha = 0;\n    this.col = col;\n\n    //this.col = this.p.color(255, 0, 0, this.alpha);\n\n    this.dir = dir;\n    this.parent = parent;\n\n    this.startTime = charOb.startTime;\n    this.endTime = charOb.endTime;\n    this.isDisplayed = false;\n    this.displayTime = this.endTime - this.startTime;\n    //console.log(this.char + ' | '+ this.startTime);\n    //console.log(this.posArray);\n    this.isChorus;\n    this.getIsChorus();\n\n    //this.chorusX = 0;\n    //this.chorusY = 0;\n    this.chorusX = Math.floor(Math.random() * 50);\n    this.chorusY = Math.floor(Math.random() * 50);\n    //console.log(this.char + \" | \" + this.isChorus);\n    //this.chorusCol = this.p.color(Math.floor(Math.random() * 255), Math.floor(Math.random() * 255), Math.floor(Math.random() * 255));\n\n    if(!isFinite(this.posX) || !isFinite(this.posY)) {\n      console.log(\"ブロック [\"+this.char+\"] は異常値です。\");\n      console.log(\"ブロック情報 | 文字 : \"+this.char+ \" posX : \"+this.posX+\" posY : \"+this.posY);\n      console.log(this.posArray);\n    }\n\n    //this.distRad;\n    this.angle;\n    switch(this.dir) {\n      case 'N':\n        this.angle = 0;\n        break;\n      case 'S':\n        this.angle = 180;\n        break;\n      case 'E':\n        this.angle = 90;\n        break;\n      case 'W':\n        this.angle = 270;\n        break;\n    }\n    this.distRad = p.radians(this.angle);\n    this.preAngle = this.angle - 90;\n    this.rad = 0;\n    this.isSetChorusPos = false;\n    this.posX_chorus = 0;\n    this.posY_chorus = 0;\n    this.size_chorus = 0;\n    this.alpha_chorus = 0;\n    this.col_chorus = p.color(100, 0, 100);\n    this.col_chorusOut = p.color(Math.floor(Math.random() * 100), 100, 100);\n  }\n\n  update_fadein(position) {\n    const p = this.p;\n    const progress = 1 - (this.startTime - position) / time_fadein;\n    const eased = Ease.quintIn(progress);\n    this.alpha = 100 * eased;\n    this.col = p.color(255, 0, 0, this.alpha);\n    let r = 90 * eased;\n    r = p.constrain(r, 0, 90);\n    const a = this.preAngle + r;\n    this.rad = p.radians(a);\n    //console.log(this.char + \" / \" + progress + ' : ' + eased + ' : ' + this.alpha);\n    //console.log(this.char + \" / \" + progress + ' : ' + this.preAngle + ' : ' + r);\n\n    if(progress > 1) this.isDisplayed = true;\n  }\n\n  update_fadeout(position) {\n\n  }\n\n  displayText() {\n    const p = this.p;\n    p.textSize(this.blockSize);\n    p.push();\n    p.translate(this.posX, this.posY);\n    p.rotate(this.rad);\n    p.noStroke();\n    p.fill(p.color(255, 0, 255, this.alpha));\n    p.text(this.char, 0, 0);\n    p.pop();\n    //this.isDisplayed = true;\n  }\n\n  calcPos() {\n    if(this.posArray.length == 1) {\n      const pos = this.posArray[0];\n      this.posX = (pos[1] * globalBlockSize) + (this.blockSize / 2);\n      this.posY = (pos[0] * globalBlockSize) + (this.blockSize / 2);\n    } else {\n      let x = new Array();\n      let y = new Array();\n      for(const a of this.posArray) {\n        x.push(a[1]);\n        y.push(a[0]);\n      }\n      const minX = Math.min(...x);\n      const minY = Math.min(...y);\n      this.posX = (minX * globalBlockSize) + (this.blockSize / 2);\n      this.posY = (minY * globalBlockSize) + (this.blockSize / 2);\n    }\n  }\n\n  getIsChorus() {\n    for(const c of chorus) {\n      if(c.startTime <= this.startTime &&  this.startTime <= c.endTime) {\n        this.isChorus = true;\n        return;\n      }\n    }\n    this.isChorus = false;\n  }\n\n  updateChorus_fadeIn(position) {\n    const p = this.p;\n    const progress = 1 - (this.startTime - position) / 500;\n    const eased = Ease.quintIn(progress);\n    //this.size_chorus = 1200 * eased;\n    const al = 100 * eased;\n    this.col_chorus.setAlpha(100 * eased);\n    //console.log(this.col_chorus);\n    //if(progress > 1) this.col_chorus = this.col_chorusOut;\n  }\n\n  displayChorusText() {\n    const p = this.p;\n    p.push();\n    p.textSize(this.size_chorus);\n    p.blendMode(p.EXCLUSION);\n    p.translate(this.posX_chorus, this.posY_chorus);\n    p.noStroke();\n    p.fill(this.col_chorus);\n    p.text(this.char, 0, 0);\n\n    //p.blendMode(p.HARD_LIGHT);\n    /*\n    p.fill(p.color(20, 80, 100, 80));\n    p.text(this.char, this.chorusX, 20);\n    p.fill(p.color(50, 80, 100, 80));\n    p.text(this.char, -20, -this.chorusY);\n    */\n\n    p.pop();\n    //this.isDisplayed = true;\n  }\n\n  updateChorus_fadeOut(position) {\n    const p = this.p;\n    const progress = 1 - (position - this.endTime) / 500;\n    const eased = Ease.quintIn(progress);\n    //this.size_chorus = 1200 * eased;\n    const al = 100 - 100 * eased;\n    //this.col_chorus = this.col_chorusOut;\n    this.col_chorus.setAlpha(al);\n    console.log(al);\n\n  }\n\n  setChorusPos(sizeX, sizeY) {\n    this.size_chorus = 1200;\n    const minX = (canvasW / 2) - ((sizeX * globalBlockSize) / 2) + (this.size_chorus / 2);\n    const maxX = (canvasW / 2) + ((sizeX * globalBlockSize) / 2) - (this.size_chorus / 2);\n    const minY = (canvasH / 2) - ((sizeY * globalBlockSize) / 2) + (this.size_chorus / 2);\n    const maxY = (canvasH / 2) + ((sizeY * globalBlockSize) / 2) - (this.size_chorus / 2);\n    console.log('sizeX : '+sizeX+' sizeY : '+sizeY+' / minX : '+minX+' maxX : '+maxX);\n    this.posX_chorus = Math.floor(Math.random() * (maxX - minX) + minX);\n    this.posY_chorus = Math.floor(Math.random() * (maxY - minY) + minY);\n    //console.log(this.posX_chorus + ' / '+this.posY_chorus);\n    this.isSetChorusPos = true;\n  }\n\n  get _text() {\n    return this.char;\n  }\n  get _posX() {\n    return this.posX;\n  }\n  get _posY() {\n    return this.posY;\n  }\n  get _startTime() {\n    return this.startTime;\n  }\n  get _endTime() {\n    return this.endTime;\n  }\n  get _isDisplayed() {\n    return this.isDisplayed;\n  }\n  get _isSetChorusPos() {\n    return this.isSetChorusPos;\n  }\n  get _posX_chorus() {\n    return this.posX_chorus;\n  }\n  get _posY_chorus() {\n    return this.posY_chorus;\n  }\n\n}\n","import { Block } from './Block';\nimport { Empty } from './Empty';\nimport { Grid } from './Grid';\nimport { SizingBlock } from './SizingBlock';\nimport { globalBlockSize } from './index.js';\n\n\nexport class WordBlock {\n  constructor(p, g, wordObArray, text, col) {\n    this.p = p;\n    this.g = g;\n    //console.log(\"this is chainblock  text length:\"+ word.text.length + \" which: \" + which);\n    //this.g.searchGrid();\n    this.wordObArray = wordObArray;\n    this.text = text;\n    this.charArray = this.text.split('');\n    this.sizelist = this.makeSizeList();\n\n    //charごとの連想配列\n    this.aArray = this.g.SearchGridBySizeable(text, this.sizelist);\n    //console.log(\"ワードブロックです\");\n    //console.log(this.aArray);\n    const dirA = this.aArray[0];\n    this.dir = dirA['dir'];\n    /*\n    this.empty = this.g.getEmptyPoses(text.length, which);\n    if(this.empty　=== undefined) console.log(\"見つかりませんですた！！\");\n    this.empty.sortDataBy(which);\n    */\n\n    this.col = p.color(Math.floor(Math.random() * 100), 100, 70);\n    this.blocks = new Array(text.length);\n    //this.which = which;\n    //this.bottom = bottom;\n\n    this.displayChildrenCount = 0;\n    this.isDisplayAll = false;\n    /*\n    console.log(\"this is ChainBlock\");\n    console.log(wordObArray);\n    console.log(this.wordObArray[0].children);\n    */\n    const l = this.wordObArray[0].children;\n    //console.log(l[0]);\n    //console.log(text);\n    this.charObArray = new Array();\n\n    this.startTime = null;\n    this.endTime = null;\n    for(const w of this.wordObArray) {\n      for(const x of w.children) {\n        this.charObArray.push(x);\n        if(x.startTime < this.startTime || !this.startTime) this.startTime = x.startTime;\n        if(x.endTime > this.endTime || !this.endTime) this.endTime = x.endTime;\n      }\n    }\n\n    this.posX;\n    this.posY;\n    this.calcPos();\n\n    this.posInGrid;\n    this.makePosInGrid();\n\n    this.makeBlock();\n  }\n\n  makeBlock() {\n    let i = 0;\n    for(const a of this.aArray) {\n      this.blocks[i] = new SizingBlock(this.p, this.charObArray[i], a['size'], a['dir'], a['pos'], this.col, this);\n      //console.log(this.charObArray[i] +\" | \"+a['dir']+\" | \"+a['pos']);\n      for(const p of a['pos']) this.g.setFilled(p[1], p[0]);\n      i++;\n    }\n\n    /*\n    const sp = this.selectPos();\n    for(const pos of sp) {\n      this.blocks[i] = new Block(this.p, this.charObArray[i], pos[0], pos[1], this.col, this.charArray[i], this);\n      this.g.setFilled(pos[0], pos[1]);\n      i++;\n    }\n    */\n    this.g.setEmpty();\n  }\n\n  selectPos() {\n    const poses = this.which === 'col' ? this.empty.colPoses : this.empty.rowPoses;\n    const keyPoses = this.which === 'col' ? this.empty.keyColPoses : this.empty.keyRowPoses;\n\n    //隣接マスをランダムに決定\n    let index = Math.floor(Math.random() * keyPoses.length);\n    const keyPos = keyPoses[index];\n\n    let keyindex = 0;\n    let i = 0;\n    //隣接マスのインデックスを探索\n    for(const pos of poses) {\n      if(keyPos[0] == pos[0] && keyPos[1] == pos[1]) {\n        keyindex = i;\n        //println(\"get index! :\"+keyindex);\n        break;\n      }\n      i++;\n    }\n    //println(\"pos array size is\"+posArray.size());\n    let reservedPos = new Array();\n    reservedPos.push(keyPos);\n\n    index = keyindex;\n    let previndex = index - 1;\n    let nextindex = index + 1;\n    let seq = true;\n    while(reservedPos.length < this.text.length) {\n      //booleanをランダム生成\n      seq = Math.random() < 0.5;\n      if(nextindex >= poses.length) seq = false;\n      if(previndex < 0) seq = true;\n\n      if(seq) {\n        reservedPos.push(poses[nextindex]);\n        nextindex += 1;\n      } else {\n        reservedPos.push(poses[previndex]);\n        previndex -= 1;\n      }\n    }\n\n    return this.sort(reservedPos);\n  }\n\n  sort(array) {\n    if(this.which === 'row') {\n      if(this.bottom === 'B') {\n        array.sort(function(a, b) {\n          return a[0] - b[0];\n        });\n      } else if(this.bottom === 'T') {\n        array.sort(function(a, b) {\n          return b[0] - a[0];\n        });\n      }\n\n    } else if(this.which === 'col') {\n      if(this.bottom === 'L') {\n        array.sort(function(a, b) {\n          return a[1] - b[1];\n        });\n      } else if(this.bottom === 'R') {\n        array.sort(function(a, b) {\n          return b[1] - a[1];\n        });\n      }\n    }\n    return array;\n  }\n\n  display() {\n    for(let b of this.blocks) {\n      b.displayTextRotate(this.bottom);\n    }\n  }\n\n  update() {\n  }\n\n  get getText() {\n    return this.text;\n  }\n\n  //子要素が全て描画されたらboolをtrueにする\n  inrementDisplayChildrenCount() {\n    this.displayChildrenCount++;\n    if(this.displayChildrenCount == this.blocks.length) {\n      this.isDisplayAll = true;\n    }\n  }\n\n  makeSizeList() {\n    const sizelist = new Array();\n    //漢字判定の正規表現\n    const regexp = /([\\u{3005}\\u{3007}\\u{303b}\\u{3400}-\\u{9FFF}\\u{F900}-\\u{FAFF}\\u{20000}-\\u{2FFFF}][\\u{E0100}-\\u{E01EF}\\u{FE00}-\\u{FE02}]?)/mu;\n\n    for(const char of this.charArray) {\n      if(regexp.test(char)) sizelist.push(2)\n      else sizelist.push(1);\n    }\n    return sizelist;\n  }\n\n  calcPos() {\n    const xarray = new Array();\n    const yarray = new Array();\n    for(const a of this.aArray) {\n      for(const pos of a['pos']) {\n        xarray.push(pos[1]);\n        yarray.push(pos[0]);\n      }\n    }\n    const originX = Math.min(...xarray);\n    const originY = Math.min(...yarray);\n\n    let yleng = 0;\n    let xleng = 0;\n    if(this.dir === 'N' || this.dir === 'S') {\n      yleng = Math.max(...this.sizelist);\n      xleng = this.sizelist.reduce((sum, num) => sum + num, 0);\n    } else {\n      yleng = this.sizelist.reduce((sum, num) => sum + num, 0);\n      xleng = Math.max(...this.sizelist);\n    }\n\n    this.posX = (originX * globalBlockSize) + ((xleng * globalBlockSize) / 2);\n    this.posY = (originY * globalBlockSize) + ((yleng * globalBlockSize) / 2);\n  }\n\n  makePosInGrid() {\n    const posInGrid = new Array();\n    for(const a of this.aArray) {\n      for(const pos of a['pos']) {\n        posInGrid.push(pos);\n      }\n    }\n    this.posInGrid = posInGrid;\n  }\n\n  get _posInGrid() {\n    return this.posInGrid;\n  }\n\n  get _isDisplayAll() {\n    return this.isDisplayAll;\n  }\n  get _blocks() {\n    return this.blocks;\n  }\n\n  get _posX() {\n    return this.posX;\n  }\n  get _posY() {\n    return this.posY;\n  }\n  get _startTime() {\n    return this.startTime;\n  }\n  get _endTime() {\n    return this.endTime;\n  }\n}\n","import { WordBlock } from './WordBlock';\n\nexport class PhraseBlock {\n  constructor(p, g, phrase){\n    this.p = p;\n    this.g = g;\n    this.phrase = phrase;\n\n    this.wordObArray = new Array();\n    this.textArr = new Array();\n    this.setArrByPartOfSpeech(phrase);\n\n    if(this.phrase.text.includes('、') || this.phrase.text.includes('。') || this.phrase.text.includes('？')) this.setArrByPunct();\n    if(this.phrase.text.includes('(')) this.setArrByText();\n    if(this.textArr.length != this.wordObArray.length) console.log(\"要素数違うお！\");\n    this.phraseleng = this.textArr.length;\n\n    this.wordBlocks = new Array(this.phraseleng);\n    this.col = p.color(Math.floor(Math.random() * 100), 60, 70);\n\n    this.displayChildrenCount = 0;\n    this.isDisplayAll = false;\n    this.makeWordBlock();\n  }\n\n  makeWordBlock() {\n    for(let i = 0; i < this.phraseleng; i++) {\n      this.wordBlocks[i] = new WordBlock(this.p, this.g, this.wordObArray[i], this.textArr[i], this.col);\n    }\n  }\n\n  display() {\n    for(const w of this.wordBlocks) {\n      w.display();\n    }\n  }\n\n  //指定された品詞をまとめる\n  setArrByPartOfSpeech(phrase) {\n    const words = phrase.children;\n    const textArray = new Array();\n    const wordObArray = new Array();\n    let i = 0;\n    let test = \"\";\n    let isA = false;\n    let tempAtext = \"\";\n    let tempAob;\n    for(const word of words) {\n      test += word.text;\n      test += word.pos+\" | \";\n      //console.log(test);\n      let text = word.text;\n      const w = new Array();\n      if(isA) {\n        text = tempAtext + word.text;\n        w.push(tempAob);\n        tempAtext = \"\";\n        tempAob = null;\n        isA = false;\n      }\n      w.push(word); //wordオブジェクトを配列にする\n      //助詞(P),助動詞(M)のとき前の要素に追加\n      if(word.pos === 'P' || word.pos === 'M') {\n        textArray[i-1] += text;\n        wordObArray[i-1].push(word);\n      //連体詞(A)のとき後ろの要素に追加\n      } else if(word.pos === 'A') {\n        isA = true;\n        tempAtext = word.text;\n        tempAob = word;\n      } else {\n        textArray.push(text);\n        wordObArray.push(w);\n        i++;\n      }\n    }\n    this.wordObArray = wordObArray;\n    this.textArr = textArray;\n  }\n\n  setArrByPunct() {\n    let textA = this.textArr;\n    let obA = this.wordObArray;\n    let tmpText = \"\";\n    let tmpOb = new Array();\n\n    for(let i = 0; i < textA.length; i++) {\n      if(textA[i].includes('、') || textA[i].includes('。') || textA[i].includes('？')) {\n        const tmpText = textA[i];\n        const tmpOb = obA[i];\n        textA.splice(i, 1);\n        obA.splice(i, 1);\n        textA[i - 1] = textA[i - 1] + tmpText;\n        for(const o of tmpOb) {\n          obA[i - 1].push(o);\n        }\n      }\n    }\n\n    this.textArr = textA;\n    this.wordObArray = obA;\n  }\n\n  setArrByText() {\n    let textA = this.textArr;\n    let obA = this.wordObArray;\n\n    let startIndex = 0;\n    let endIndex = 0;\n    let tmpText = \"\";\n    let tmpOb = new Array();\n    let isStart = false;\n\n    let newA;\n    let no;\n    for(let i = 0; i < textA.length; i++) {\n      if(textA[i].includes('(')) {\n        isStart = true;\n        startIndex = i;\n        endIndex = i;\n      }\n      if(isStart) {\n        tmpText += textA[i];\n        for(const ob of obA[i]) {\n          tmpOb.push(ob);\n        }\n        if(textA[i].includes(')')) {\n          textA.splice(startIndex, endIndex);\n          obA.splice(startIndex, endIndex);\n          textA.push(tmpText);\n          obA.push(tmpOb);\n          isStart = false;\n          startIndex = 0;\n          endIndex = 0;\n          tmpText = \"\";\n          tmpOb = new Array();\n        } else {\n          endIndex++;\n        }\n      }\n      //console.log(\" i : \"+i+\" | isStart : \"+isStart+\" | startIndex : \"+startIndex+\" | endIndex : \"+endIndex+ \" | tmpText : \"+tmpText);\n    }\n    this.textArr = textA;\n    this.wordObArray = obA;\n  }\n\n  get _wordBlocks() {\n    return this.wordBlocks;\n  }\n  get _isDisplayAll() {\n    return this.isDisplayAll;\n  }\n}\n","export class Ball {\n  constructor(p, x, y) {\n    this.p = p;\n    this.posX = x;\n    this.posY = y;\n    this.size = p.random(400, 800);\n    const h = p.random(100);\n    const s = p.random(70, 100);\n    const b = p.random(80, 100);\n    this.col = p.color(h, s, b);\n    this.col.setAlpha(p.random(p.random(100)));\n\n    this.num = 5;\n    this.posXarray = [];\n    this.posYarray = [];\n    this.sizeArray = [];\n    for(let i = 0; i < this.num; i++) {\n      this.posXarray.push(p.randomGaussian(this.posX, 300));\n      this.posYarray.push(p.randomGaussian(this.posY, 300));\n      //this.sizeArray.push(p.random(400, 800));\n      this.sizeArray.push(p.random(100, 300));\n    }\n  }\n\n  draw() {\n    this.p.push();\n    this.p.blendMode(this.p.LIGHTEST);\n    this.p.noStroke();\n    this.p.fill(this.col);\n    this.p.circle(this.posX, this.posY, this.size);\n    this.p.pop();\n  }\n\n  drawMulti() {\n    for(let i = 0; i < this.num; i++) {\n      this.p.push();\n      this.p.blendMode(this.p.LIGHTEST);\n      this.p.noStroke();\n      this.p.fill(this.col);\n      this.p.circle(this.posXarray[i], this.posYarray[i], this.sizeArray[i]);\n      this.p.pop();\n    }\n  }\n\n}\n","const P5 = p5;\nconst { Player, Ease } = TextAliveApp;\nimport { Block } from './Block';\nimport { Grid } from './Grid';\nimport { drawGrid } from './drawGrid';\nimport { WordBlock } from './WordBlock';\nimport { PhraseBlock } from './PhraseBlock';\nimport { Ball } from './Ball';\n\nlet text;\n\nconst player = new Player({\n\tapp: {token: \"6rquYSfCRiWlgifb\"},\n\n\t// 読み込むフォントを指定する。nullだとすべて読み込む。\n\t//fontFamilies: null,\n\n\tmediaBannerPosition: \"buttom right\",\n\t// 音源メディアを指定する。\n\tmediaElement: document.querySelector(\"#media\"),\n\n\t// throttleアップデート関数の発行間隔をしていする。ミリセカンド。\n\t//throttleInterval: 10,\n\n\t// TextAlive Playerの音源の再生状態を管理するTimerインスタンス。よくわからん。。。\n\t//timer: ,\n\n\t// V/A空間の座標値を取得するか否か。\n\t// V/A空間について：https://ipsj.ixsq.nii.ac.jp/ej/?action=repository_uri&item_id=142056&file_id=1&file_no=1\n\t// V/A空間は、ある時刻の音源に対する感情の指標である。VはValance(怪ー不快)、Activation(活性ー日活性)の二軸で表される。例えば、喜びは二軸ともに正。\n\tvalenceArousalEnabled: true,\n\n\t// 声量情報を取得するかどうか。\n\tvocalAmplitudeEnabled: true,\n\n});\n\n/////////////////////// イベントリスナを登録する ///////////////////////\n// 3種類のイベントリスナから指定する。PlayerEventListener, PlyaerAppListener, LoaderListener\n// 指定したイベントリスナは、必ずoverrideして定義しなければならない。\n// https://developer.textalive.jp/packages/textalive-app-api/globals.html#playerlistener\nplayer.addListener({\n\t// PlayerEventListenerのイベントリスナ\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/playereventlistener.html\n\t//onDispose, \t\t\t\t// プレイヤーが破棄されるとき\n\t//onMediaElementSet,\t \t// 音源メディアが変更されたとき(配属先のDOM要素が変更されたとき)\n\t//onMediaSeek,\t\t\t// 再生中の楽曲の再生位置が変更されたとき\n\t//onPause,\t\t\t\t// 再生中の楽曲が一時停止されたとき\n\t//onPlay,\t\t\t\t\t// 楽曲の再生が始まったとき\n\t//onResize,\t\t\t\t// ステージサイズが変更されたとき（ステージってなに？2021/08/10）\n\t//onSeek,\t\t\t\t\t// 再生中の楽曲の再生位置がユーザーによって変更されたとき\n\t//onStop,\t\t\t\t\t// 再生中の楽曲が一時停止されたとき\n\t//onThrottledTimeUpdate,\t// 動画の再生位置が変更されたときに呼ばれる（あまりに頻繁な発火を防ぐため一定間隔に間引かれる）、間隔時間はPlayerクラスのオプションで設定可能。\n\tonTimeUpdate,\t\t\t// 動画の再生位置が変更されたときに呼ばれる\n\t//onTimerReady,\t\t\t// 動画のためのTimerの準備が整ったとき\n\tonVideoReady,\t\t\t// 動画オブジェクトの準備が整ったとき\n\t//onVideoSeek,\t\t\t// 動画のシーク操作が行われたとき\n\t//onVideoSeekEnd,\t\t\t// 動画のシーク操作が終わったとき\n\t//onVideoSeekStart,\t\t// 動画のシーク操作が始まったとき\n\t//onVolumeUpdate,\t\t\t// 音量が変更されたとき\n\n\t// PlayerAppListenerのイベントリスナ\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/playerapplistener.html\n\t//onAppConnected, \t\t// TextAliveAppAPIサーバとの接続時に呼ばれる\n\t//onAppMediaChange,\t\t// 再生すべき楽曲URLが変更されたとき\n\t//onAppParameterUpdate,\t// TextAliveアプリのパラメタが変更されたときに呼ばれる\n\tonAppReady,\t\t\t\t// TextAliveホストとの接続時に呼ばれる\n\n\t// LoaderListenerのイベントリスナ。このリスナは、DataLoaderListenerの中で、さらに4つに分かれる。\n\t// DataLoaderListener -> VideoLoaderListener, SongLoaderListener, TextLoaderListener, FontLoaderListener\n\t// ↓ LoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/globals.html#loaderlistener\n\t// ↓ VideoLoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/videoloaderlistener.html\n\t// ↓ SongLoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/songloaderlistener.html\n\t// ↓ TextLoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/textloaderlistener.html\n\t// ↓ FontLoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/fontloaderlistener.html\n\t//onVideoLoad, \t\t\t// 動画データが読み込まれたとき\n\t//onSongInfoLoad,\t\t\t// 楽曲の詳細情報が読み込まれたとき\n\t//onSongLoad,\t\t\t\t// 楽曲の基本情報が読み込まれたとき\n\t//onSongMapLoad,\t\t\t// 楽曲地図が読み込まれたとき\n\t//onValenceArousalLoad,\t// V/A空間が読み込まれたとき\n\t//onVocalAmplitudeLoad,\t// 声量の情報が読み込まれたとき\n\t//onLyricsLoad,\t\t\t// 歌詞テキストの発生タイミング情報が読み込まれたとき\n\t//onTextLoad,\t\t\t\t// 歌詞テキストが読み込まれたとき\n\t//onFontsLoad,\t\t\t// フォントが読み込まれたとき\n\n});\n\n// アニメーション関数の定義、フレーズ、単語、文字\n// フレーズが発声されていたら #text_phrase に表示する\nconst animatePhrase = function (now, unit) {\n\tif (unit.contains(now)) {\n\t\tdocument.querySelector(\"#text_phrase\").textContent = unit.text;\n    text = unit.text;\n\t}\n};\n\n// 単語が発声されていたら #text_word に表示する\nconst animateWord = function (now, unit) {\n\tif (unit.contains(now)) {\n\t\tdocument.querySelector(\"#text_word\").textContent = unit.text;\n\t}\n};\n\n// 文字が発声されていたら #text_char に表示する\nconst animateChar = function (now, unit) {\n\tif (unit.contains(now)) {\n\t\tdocument.querySelector(\"#text_char\").textContent = unit.text;\n\t}\n};\n\nfunction onAppReady(app){\n\n\t//その心に灯る色は\n\t//player.createFromSongUrl(\"https://www.youtube.com/watch?v=bMtYf3R0zhY\");\n\n\t//Loading Memories\n\tplayer.createFromSongUrl(\"https://www.youtube.com/watch?v=ZOTJgXBkJpc\");\n\t//player.createFromSongUrl(\"https://piapro.jp/t/N--x/20210204215604\");\n\t//歌の欠片と\n\t//player.createFromSongUrl(\"https://www.youtube.com/watch?v=CkIy0PdUGjk\");\n\n\t//player.createFromSongUrl(\"https://piapro.jp/t/RoPB/20220122172830\");\n\t//player.createFromSongUrl(\"https://www.youtube.com/watch?v=ygY2qObZv24\");\n\tdocument.querySelector(\"#onAppReady\").textContent = \"準備完了\";\n}\n\n/*\nlet timer = null;\nfunction onTimerReady(timer) {\n}\n*/\n\nlet phrases = null;\nlet sabi = null;\nlet songInfo = null;\nexport let chorus = null;\n// 動画データが読み込まれたとき\n// 楽曲情報を表示する。アニメーション関数を割り当てる。\nfunction onVideoReady(v){\n  phrases = player.video.phrases;\n\tsongInfo = player.data.songMap.segments;\n\t// サビ情報を読み取る\n\tvar segments_contenst = \"\";\n\t// for文でarrayをすべてたどる\n\t// https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/for...of\n\tfor(const element of player.data.songMap.segments){\n\t\tsegments_contenst = segments_contenst + String(element.chorus) + \"(\" + String(element.duration) + \" [ms]), \";\n\t\tconsole.log(\"セグメント情報\");\n\t\tconsole.log(element);\n\t\tif(element.chorus) {\n\t\t\tsabi = element;\n\t\t\tchorus = sabi.segments;\n\t\t}\n\t}\n\n\tdocument.querySelector(\"#segments\").textContent = segments_contenst;\n\n\tdocument.querySelector(\"#song_name\").textContent = player.data.song.name;\n\tdocument.querySelector(\"#song_permalink\").textContent = player.data.song.permalink;\n\tdocument.querySelector(\"#song_artist\").textContent = player.data.song.artist.name;\n\n\t// 定期的に呼ばれる各フレーズの \"animate\" 関数をセットする\n\tlet w;\n\t// Set \"animate\" function\n  \tw = player.video.firstPhrase;\n  \twhile (w) {\n    \tw.animate = animatePhrase;\n    \tw = w.next;\n  \t}\n\t// 定期的に呼ばれる各単語の \"animate\" 関数をセットする\n  \t// Set \"animate\" function\n  \tw = player.video.firstWord;\n  \twhile (w) {\n    \tw.animate = animateWord;\n    \tw = w.next;\n  \t}\n\t// 定期的に呼ばれる各文字の \"animate\" 関数をセットする\n  \t// Set \"animate\" function\n  \tw = player.video.firstChar;\n  \twhile (w) {\n    \tw.animate = animateChar;\n    \tw = w.next;\n  \t}\n\tdocument.querySelector(\"#onVideoReady\").textContent = \"準備完了\";\n}\n\n\n// 楽曲の再生位置が更新されたときに呼び出される。（再生中常に呼び出される）\n// index.htmlの各変数を随時更新する。\nfunction onTimeUpdate(position){\n\tdocument.querySelector(\"#position\").textContent = position;\n\tdocument.querySelector(\"#beat_index\").textContent = player.findBeat(position).index;\n\tdocument.querySelector(\"#beat_duration\").textContent = player.findBeat(position).duration;\n\tdocument.querySelector(\"#chord_index\").textContent = player.findChord(position).index;\n\tdocument.querySelector(\"#chord_duration\").textContent = player.findChord(position).duration;\n\tdocument.querySelector(\"#chorus_index\").textContent = player.findChorus(position).index;\n\tdocument.querySelector(\"#chorus_duration\").textContent = player.findChorus(position).duration;\n\tdocument.querySelector(\"#VA_A\").textContent = player.getValenceArousal(position).a;\n\tdocument.querySelector(\"#VA_V\").textContent = player.getValenceArousal(position).v;\n\tdocument.querySelector(\"#volume\").textContent = player.getVocalAmplitude(position);\n\tdocument.querySelector(\"#phrase\").textContent = player.video.findPhrase(position).text;\n\tdocument.querySelector(\"#word\").textContent = player.video.findWord(position).text;\n\tdocument.querySelector(\"#char\").textContent = player.video.findChar(position).text;\n}\n\nexport const canvasW = 4000;\nexport const canvasH = 4000;\nexport const globalBlockSize = 100;\n\nexport const time_fadein = 100;\nexport const time_fadeout = 100;\nnew P5((p5) => {\n  const u = 100;\n  const centerx = 300;\n  const centery = 300;\n  const block = 100;\n  const showGrid = true;\n  let b;\n  let b2;\n  let g;\n  let init;\n  let phraseBlocks;\n  let testBlocks;\n\tlet worldCamera;\n\tlet autoCamera;\n\tlet zoomCamera;\n\n\tlet myFont;\n\n\tlet isChorus = false;\n\tlet chorusList;\n\tlet currentChorus;\n\tlet chorusIndex = 0;\n\tlet chorusSize = { sizeX: 0, sizeY: 0, };\n\n\tconst wordBlocks = new Array();\n\n\tlet yarimasuta = true;\n\n\tconst balls = new Array();\n\tp5.preload = () => {\n\t\t//myFont = p5.loadFont('./assets/MPLUSRounded1c-Light.ttf');\n\t}\n\n  p5.setup = () => {\n\t\t//let result = p5.createCanvas(window.innerWidth, window.innerHeight);\n\t\tlet result = p5.createCanvas(window.innerHeight, window.innerHeight);\n\t\tresult.parent(\"result\");\n\n    p5.textFont('Monoton');\n    p5.rectMode(p5.CENTER);\n    p5.textAlign(p5.CENTER, p5.CENTER);\n\t\tp5.colorMode(p5.HSB, 100);\n\t\tp5.frameRate(24);\n\t\tworldCamera = new Camera(p5, canvasW, canvasH);\n    g = new Grid(p5, canvasW, canvasH);\n    init = false;\n\t\t//console.log(songInfo);\n  };\n\n  p5.draw = () => {\n    //console.log(\"now drawing\");\n    if(!player || !player.video || !player.timer) {\n      return;\n    } else if(!init){\n      console.log(\"---------Start initial draw------------\");\n      phraseBlocks = new Array(phrases.length);\n\n\t\t\tlet cou = 0;\n      let i = 0;\n\t\t\tlet test = new Array();\n\n\t\t\tfor(let cou = 0; cou < phrases.length; cou++) {\n\t\t\t\ttest.push(phrases[cou]);\n\t\t\t}\n\n      testBlocks = new Array(test.length);\n      for(const p of test) {\n        testBlocks[i] = new PhraseBlock(p5, g, p);\n        i++;\n      }\n\n\t\t\tconst blocks = new Array();\n\t\t\t//const wordBlocks = new Array();\n\t\t\tfor(const phrase of testBlocks) {\n\t\t\t\tfor(const word of phrase._wordBlocks) {\n\t\t\t\t\twordBlocks.push(word);\n\t\t\t\t\tfor(const char of word._blocks) {\n\t\t\t\t\t\tblocks.push(char);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconsole.log(wordBlocks);\n\t\t\tautoCamera = new AutoCamera(p5, blocks, canvasW, canvasH);\n\t\t\tzoomCamera = new ZoomCamera(p5, canvasW, canvasH);\n\n\t\t\tconsole.log(\"-----------End initial draw------------\");\n\t\t\tchorusList = sabi.segments;\n\t\t\tcurrentChorus = chorusList[chorusIndex];\n      init = true;\n    }\n\n    p5.background(0);\n\t\tconst position = player.timer.position;\n\n\n\t\tconst beat = player.findBeat(position);\n\t\tif(beat) {\n\t\t\tconst progress = beat.progress(position);\n\t\t\tconst alpha = 100 * Ease.quintIn(progress);\n\t\t\tconst size = 500 + 800 * Ease.quintIn(progress);\n\t\t\tconst x = p5.width * Ease.quintIn(progress);\n\t\t\tp5.fill(10, 80, 50, alpha);\n\t\t\tp5.strokeWeight(5);\n\t\t\tp5.stroke(80, 100, 100, alpha);\n\t\t\tp5.line(0, p5.height - 20, x, p5.height - 20);\n\t\t\t//p5.circle(p5.width / 2, p5.height / 2, size);\n\t\t}\n\t\t//カメラ移動\n\t\t/*\n\t\tif(p5.mouseIsPressed) {\n\t\t\t//console.log(\"タッチされました\" + \"worldCameraX is \"+worldCamera.pos.x+\"  mouseX is \"+p5.mouseX);\n\t\t\tworldCamera.posX = p5.mouseX;\n\t\t\tworldCamera.posY = p5.mouseY;\n\t\t}\n\t\t*/\n\n\t\t/*\n\t\tp5.translate(-worldCamera.posX, -worldCamera.posY);\n\t\tp5.scale(worldCamera.zoom);\n\t\t*/\n\n\n\t\tif(chorusIndex < chorusList.length && currentChorus.startTime < position + 500) {\n\t\t\tisChorus = true;\n\t\t\tconst res = g.getActiveGridSize(currentChorus.endTime, wordBlocks);\n\t\t\tchorusSize['sizeX'] = res['sizeX'];\n\t\t\tchorusSize['sizeY'] = res['sizeY'];\n\t\t\t//console.log(\"サビです!!!!!!\");\n\t\t}\n\t\tif(isChorus && currentChorus.endTime < position) {\n\t\t\tisChorus = false;\n\t\t\tzoomCamera._isInit = true;\n\t\t\t//console.log(\"サビおわたっw\");\n\t\t\tchorusIndex++;\n\t\t\tcurrentChorus = chorusList[chorusIndex];\n\t\t}\n\n\t\t/*\n\t\tif(yarimasuta) {\n\t\t\tconst res = g.getActiveGridSize(currentChorus.endTime, wordBlocks);\n\t\t\tconsole.log(res);\n\t\t\tyarimasuta = false;\n\t\t}\n\t\t*/\n\n\t\t/*\n\t\tlet txt = \"\";\n\t\tlet segCount = 0;\n\t\tfor(const s of songInfo) {\n\t\t\tfor(let i = 0; i < s.segments.length; i++) {\n\t\t\t\tif(s.segments[i].startTime < position && position < s.segments[i].endTime) {\n\t\t\t\t\ttxt = 'セグメンツ ['+segCount+']の';\n\t\t\t\t\ttxt = txt + '['+i+']　番目の要素です。';\n\t\t\t\t}\n\t\t\t}\n\t\t\tsegCount++;\n\t\t}\n\t\tconsole.log(txt);\n\t\t*/\n\n\t\tautoCamera.update(position, isChorus);\n\t\tif(!isChorus) {\n\t\t\tp5.translate(-(autoCamera._x - (window.innerHeight / 2)),  -(autoCamera._y - (window.innerHeight / 2)));\n\t\t\t//p5.translate(-(autoCamera._x - (window.innerWidth / 2)),  -(autoCamera._y - (window.innerHeight / 2)));\n\t\t\tp5.scale(autoCamera.zoom);\n\t\t} else {\n\n\t\t\tif(zoomCamera.isInit) {\n\t\t\t\tzoomCamera.setInit((autoCamera._x - (window.innerHeight / 2)), (autoCamera._y - (window.innerHeight / 2)), g.getActiveGridSize(currentChorus.endTime, wordBlocks), position, currentChorus.startTime);\n\t\t\t}\n\t\t\tzoomCamera.update(position);\n\n\t\t\t//zoomCamera.updateChorus(g.getActiveGridSize(currentChorus.endTime, wordBlocks));\n\n\t\t  p5.scale(zoomCamera.zoom);\n\t\t\tp5.translate(-zoomCamera.x, -zoomCamera.y);\n\t\t}\n\t\t//console.log(\"position : \" + position + \"  camera x : \"+autoCamera._x+ \"  y : \"+ autoCamera._y);\n\n\n\n\t\t//ブロックオブジェクトをすべて走査\n    for(const phrase of testBlocks) {\n\t\t\tfor(const word of phrase._wordBlocks) {\n\t\t\t\tfor(const char of word._blocks) {\n\n\t\t\t\t\tif(isChorus) {\n\t\t\t\t\t\tif(char._startTime < position + 500 && position < char._endTime) {\n\t\t\t\t\t\t\tif(!char.isSetChorusPos) {\n\t\t\t\t\t\t\t\tchar.setChorusPos(chorusSize['sizeX'], chorusSize['sizeY']);\n\t\t\t\t\t\t\t\tballs.push(new Ball(p5, char._posX_chorus, char._posY_chorus));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchar.updateChorus_fadeIn(position);\n\t\t\t\t\t\t\tchar.displayChorusText();\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(char._isDisplayed) {\n\t\t\t\t\t\t//char.update();\n\t\t\t\t\t\tchar.displayText();\n\t\t\t\t\t} else if(char._startTime < position + time_fadein) {\n\t\t\t\t\t\tchar.update_fadein(position);\n\t\t\t\t\t\tchar.displayText();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(const b of balls) {\n\t\t\tb.drawMulti();\n\t\t}\n    //g.displayPoint();\n    //drawGrid(p5, canvasW, canvasH);\n  };\n\n\tp5.mousePressed = () => {\n\t\tconsole.log('マウス位置 : ' + p5.mouseX + ' / ' + p5.mouseY);\n\t\tconst posX = p5.mouseX + (autoCamera._x - (window.innerWidth / 2));\n\t\tconst posY = p5.mouseY + (autoCamera._y - (window.innerHeight / 2));\n\t\tconsole.log('キャリブレ後 : ' + posX + ' / ' + posY);\n\t\tconst selectGridPos = [Math.floor(posY / globalBlockSize), Math.floor(posX / globalBlockSize)];\n\t\tconsole.log('グリッドポジション : ' + selectGridPos[1] + ' / ' + selectGridPos[0]);\n\t\t//クリック位置から該当するブロックオブジェクトを探索\n\t\tfor(const w of wordBlocks) {\n\t\t\tfor(const pos of w._posInGrid) {\n\t\t\t\tif(pos.toString() === selectGridPos.toString()) {\n\t\t\t\t\tconsole.log(w.getText);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tp5.keyPressed = (key) => {\n\t\tworldCamera.draw(key.key);\n\t};\n\n\tp5.mouseDragged = () => {\n\t\tworldCamera.posX = p5.mouseX;\n\t\tworldCamera.posY = p5.mouseY;\n\t};\n});\n\nclass Camera {\n  constructor(p5, canvasW, canvasH) {\n\t\tthis.p5 = p5;\n    this.pos = p5.createVector(0, 0);\n\t\tthis._zoom = 0.3;\n  }\n  draw(key) {\n    if (key == 'w') this.pos.y -= 50;\n    if (key == 's') this.pos.y += 50;\n    if (key == 'a') this.pos.x -= 50;\n    if (key == 'd') this.pos.x += 50;\n\t\tif (key == 'x') this._zoom *= 2;\n  }\n\tget posX() {\n\t\treturn this.pos.x;\n\t}\n\tget posY() {\n\t\treturn this.pos.y;\n\t}\n\tget zoom() {\n\t\treturn this._zoom;\n\t}\n\n\tset posX(num) {\n\t\tthis.pos.x += num - this.pos.x;\n\t}\n\tset posY(num) {\n\t\tthis.pos.y += num - this.pos.y;\n\t}\n}\n\nclass ZoomCamera {\n\tconstructor(p5, canvasW, canvasH) {\n\t\tthis.p = p5;\n\t\tthis.canvasW = canvasW;\n\t\tthis.canvasH = canvasH;\n\t\tthis._x = 0;\n\t\tthis._y = 0;\n\t\tthis._zoom = 0;\n\n\t\tthis.isInit = true;\n\t\tthis.distScale = 0;\n\t\tthis.distX = 0;\n\t\tthis.distY = 0;\n\t\tthis.startTime = 0;\n\t\tthis.endTime = 0;\n\t\tthis.preScale = 1;\n\t}\n\n\tupdateChorus(size) {\n\t\tconst xsize = window.innerHeight / (size['sizeX'] * globalBlockSize) * 1;\n\t\tconst ysize = window.innerHeight / (size['sizeY'] * globalBlockSize) * 1;\n\t\t//console.log('sizeX : ' + size['sizeX'] + '  sizeY : ' + size['sizeY']);\n\t\t//console.log('xsize : ' + xsize + '  ysize : ' + ysize);\n\n\t\tconst scale = xsize < ysize ? xsize : ysize;\n\t\t//console.log('スケール' + scale);\n\t\tthis._zoom = scale;\n\t\tthis._x = (canvasW / 2) - ((size['sizeX'] * globalBlockSize) / 2);\n\t\tthis._y = (canvasH / 2) - ((size['sizeY'] * globalBlockSize) / 2);\n\t\t//console.log(this._x + ' / ' + this._y);\n\t\t//console.log(window.innerWidth + ' / ' + window.innerHeight);\n\t}\n\n\tupdate(position) {\n\t\tif(position - this.startTime >= 500) return;\n\t\t//if(this._x == this.distX && this._y == this.distY && this._zoom == this.distScale) return;\n\t\tthis.moveTime = (position - this.startTime) / 500;\n\t\tthis._x = this.preX + (this.distX - this.preX) * Ease.quintOut(this.moveTime);\n\t\tthis._y = this.preY + (this.distY - this.preY) * Ease.quintOut(this.moveTime);\n\t\tthis._zoom = 1 - ( (1 - this.distScale) * Ease.quintOut(this.moveTime) );\n\t\tconsole.log('moveTime : '+this.moveTime+' x : '+this._x+' y : '+this._y+' zoom : '+this._zoom);\n\t}\n\n\tsetInit(preX, preY, size, startTime, endTime) {\n\t\tthis.preX = preX;\n\t\tthis.preY = preY;\n\t\tconst xsize = window.innerHeight / (size['sizeX'] * globalBlockSize) * 1;\n\t\tconst ysize = window.innerHeight / (size['sizeY'] * globalBlockSize) * 1;\n\t\tconst scale = xsize < ysize ? xsize : ysize;\n\t\tthis.distScale = scale;\n\t\tthis.distX = (canvasW / 2) - ((size['sizeX'] * globalBlockSize) / 2);\n\t\tthis.distY = (canvasH / 2) - ((size['sizeY'] * globalBlockSize) / 2);\n\t\tthis.startTime = startTime;\n\t\tthis.endTime = endTime;\n\t\tthis.isInit = false;\n\t}\n\n\tget x() {\n\t\treturn this._x;\n\t}\n\tget y() {\n\t\treturn this._y;\n\t}\n\tget zoom() {\n\t\treturn this._zoom;\n\t}\n\n\tset _isInit(bool) {\n\t\tthis.isInit = bool;\n\t}\n}\n\nclass AutoCamera {\n\tconstructor(p5, block, canvasW, canvasH) {\n\t\tthis.p = p5;\n\t\tthis.block = block;\n\t\tthis.canvasW = canvasW;\n\t\tthis.canvasH = canvasH;\n\t\tthis._zoom = 1.0;\n\t\tthis.index = 0;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.distX;\n\t\tthis.distY;\n\t\tthis.distSet();\n\t\tconsole.log(this.distX+\"  /  \" +this.distY);\n\t\tthis.preX = this.x;\n\t\tthis.preY = this.y;\n\t\tthis.startTime = 0;\n\t\tthis.moveTime = 0;\n\t\tthis.stopTime = 0;\n\t\tthis.isMove = true;\n\t\tthis.angle = 0;\n\t\tthis.moveLimit = this.block[this.index].startTime;\n\t\tconsole.log(\"limit is \" + this.moveLimit);\n\t\tthis.isEnd = false;\n\t\tthis.quickMove = false;\n\t}\n\n\tupdate(position, isChorus) {\n\t\t/*\n\t\tif(isChorus) {\n\t\t\tthis._zoom = 0.5;\n\t\t\tthis.x = (this.canvasW / 2) - window.innerWidth;\n\t\t\tthis.y = (this.canvasH / 2) - window.innerHeight;\n\t\t\treturn;\n\t\t}\n\t\t*/\n\t\tif(position < this.startTime) return;\n\t\tif(this.quickMove) {\n\t\t\tconsole.log(\"クイックムーブ！！！\")\n\t\t\tthis.x = this.block[this.index - 1]._posX;\n\t\t\tthis.y = this.block[this.index - 1]._posY;\n\t\t\t//this.x = this.distX;\n\t\t\t//this.y = this.distY;\n\t\t\tconsole.log(this.x + \"  \"+this.y);\n\t\t\tthis.quickMove = false;\n\t\t} else {\n\t\t\tthis.moveTime = (position - this.startTime) / this.moveLimit;\n\t\t\tthis.x = this.preX + (this.distX - this.preX) * Ease.quintOut(this.moveTime);\n\t\t\tthis.y = this.preY + (this.distY - this.preY) * Ease.quintOut(this.moveTime);\n\t\t}\n\t\t//console.log(\"thisX : \"+this.x + \"thisY : \"+this.y);\n\t\tif(position - this.startTime >= this.moveLimit) {\n\t\t\t//console.log(\"--------move limit !!!!-----------\");\n\t\t\t//console.log(\"x  : \"+this.x+\"  y : \"+this.y);\n\t\t\tthis.preX = this.x;\n\t\t\tthis.preY = this.y;\n\n\t\t\tthis.index++;\n\n\t\t\t//最後の要素\n\t\t\tif(this.index > this.block.length) {\n\t\t\t\tthis.isEnd = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.limitSet();\n\t\t\tthis.startTime = this.block[this.index].startTime;\n\t\t\tthis.distSet();\n\t\t\t//console.log(\"テキスト : \" + this.block[this.index]._text);\n\t\t\t//console.log(\"startTime : \" + this.startTime +\"next distX : \"+this.distX + \" distY : \"+this.distY+ \"moveLimit : \"+this.moveLimit);\n\t\t}\n\t}\n\n\tdistSet() {\n\t\tthis.distX = this.block[this.index]._posX;\n\t\tthis.distY = this.block[this.index]._posY;\n\t}\n\tlimitSet() {\n\t\tconst currentBlock = this.block[this.index];\n\t\t//console.log(\"EndTime : \"+currentBlock.endTime +\"  StartTime : \"+currentBlock.startTime);\n\t\tthis.moveLimit = currentBlock.endTime - currentBlock.startTime;\n\t\t/*\n\t\tif(this.moveLimit == 0) {\n\t\t\tthis.quickMove = true;\n\t\t}\n\t\t*/\n\n\t\t//movelimitが僅少のときスキップする\n\t\tif(this.moveLimit < 31) {\n\t\t\tlet limit = 0;\n\t\t\tlet tmpIndex = this.index;\n\t\t\twhile(limit == 0) {\n\t\t\t\tlet nextBlock = this.block[tmpIndex + 1];\n\t\t\t\tlimit = nextBlock.endTime - nextBlock.startTime;\n\t\t\t\ttmpIndex++;\n\t\t\t}\n\t\t\tthis.moveLimit = limit;\n\t\t\tthis.index = tmpIndex;\n\n\t\t\t//console.log(\"スキップするやで！！\")\n\t\t\t//console.log(\"preX : \"+this.preX+\"  preY : \"+this.preY+\"distX : \"+this.block[this.index]._posX + \"  distY : \"+this.block[this.index]._posY + \"  movelimit : \"+this.moveLimit);\n\t\t\tthis.quickMove = true;\n\n\t\t}\n\t}\n\n\tget _x() {\n\t\treturn this.x;\n\t}\n\tget _y() {\n\t\treturn this.y;\n\t}\n\tget zoom() {\n\t\treturn this._zoom;\n\t}\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}