{"version":3,"sources":["js/Block.js","js/Empty.js","js/SpiralScan.js","js/drawGrid.js","js/Grid.js","js/SizingBlock.js","js/WordBlock.js","js/PhraseBlock.js","js/Ball.js","js/SONG.js","js/index.js","../../.nodebrew/node/v18.3.0/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Block","p","charOb","x","y","col","char","parent","blockSize","posX","posY","startTime","endTime","isDisplayed","push","translate","noStroke","fill","rect","pop","textSize","text","bottom","rad","radians","rotate","Empty","initPos","Array","row_poses","col_poses","key_row_poses","key_col_poses","rowleng","colleng","s","isKey","pos","which","sort","a","b","num","length","SpiralScan","startX","startY","now","d","isFirst","direct","d0","drawGrid","width","height","row","size","strokeWeight","stroke","noFill","i","line","sizelistTo2Darray_N","sizelist","yleng","Math","max","xleng","reduce","sum","res","insertNum","count","sizelistTo2Darray_E","j","sizelistTo2Darray_W","arr","reverse","sizelistTo2Darray_S","Grid","canvasW","canvasH","w","h","centerPos","floor","console","log","grid","empty","setInitFill","spiralScan","deleteZero","setEmpty","tmp","t","color","ellipse","getCoord","splice","e","setPos","textleng","withinPos","withinRowleng","withinColleng","index","random","l","hash","allAngleArray","getAllAngleArray","reservedPos","outerReserve","n","scanGrid","used","rotationList","Object","keys","filter","indexOf","targetArr","ty","tx","tmpY","ok","isLoop","startPos","endPos","slice","isEqual","reserved","makeAarray","dir","sortDataBy","array","sizedPos","increment","leng","split","num1","num2","array1","array2","a1","position","wordBlocks","activeGrid","getGridSize","minX","maxX","minY","maxY","sizeX","sizeY","abs","result","_posInGrid","TextAliveApp","Ease","SizingBlock","posArray","globalBlockSize","calcPos","alpha","displayTime","isChorus","getIsChorus","chorusX","chorusY","isFinite","angle","distRad","preAngle","isSetChorusPos","posX_chorus","posY_chorus","size_chorus","alpha_chorus","col_chorus","col_chorusOut","isVanished","progress","time_fadein","eased","quintIn","setAlpha","r","constrain","min","chorus","c","al","blendMode","EXCLUSION","bool","WordBlock","g","wordObArray","charArray","makeSizeList","aArray","SearchGridBySizeable","dirA","blocks","displayChildrenCount","isDisplayAll","children","charObArray","posInGrid","makePosInGrid","makeBlock","setFilled","poses","colPoses","rowPoses","keyPoses","keyColPoses","keyRowPoses","keyPos","keyindex","previndex","nextindex","seq","displayTextRotate","regexp","test","xarray","yarray","originX","originY","PhraseBlock","phrase","textArr","setArrByPartOfSpeech","includes","setArrByPunct","setArrByText","phraseleng","makeWordBlock","display","words","textArray","isA","tempAtext","tempAob","word","textA","obA","tmpText","tmpOb","o","startIndex","endIndex","isStart","newA","no","ob","Ball","posXarray","posYarray","sizeArray","randomGaussian","beatProgress","LIGHTEST","circle","SONG","P5","p5","Player","isAppReady","init","isVideoReady","videoEndTime","isTimerReady","player","app","token","mediaElement","document","querySelector","valenceArousalEnabled","vocalAmplitudeEnabled","addListener","onDispose","onTimeUpdate","onTimerReady","onVideoReady","onVideoSeekEnd","onAppReady","phrases","sabi","songInfo","v","data","song","video","songMap","segments","segments_contenst","element","String","duration","cameraSize","window","innerWidth","innerHeight","time_fadeout","selectedSong","getPrelude","thTime","getInterludes","getPostlude","charBlock","_endTime","findInterlude","interludes","getDisplayedWords","bgChange","rectWidth","moveTime","map","quartIn","bgChange2","circleNum","sineOut","u","centerx","centery","block","showGrid","b2","phraseBlocks","testBlocks","worldCamera","autoCamera","zoomCamera","myFont","chorusList","currentChorus","chorusIndex","chorusSize","charBlocks","yarimasuta","balls","songlist","artist","prelude","isPrelude","interlude","isInterlude","postlude","isPostlude","bgColor","textColor","bgChangeTime","vanishedIndex","allDisplayedSize","preload","setup","createCanvas","btnlist","createDiv","id","getElementById","btn1","btn2","btn3","btn4","btn5","btn6","playBtn","playText","bs","getElementsByClassName","style","changeElement","backgroundColor","boxShadow","textContent","addEventListener","createFromSongUrl","songUrl","remove","playing","playingBtn","timer","requestPlay","textFont","rectMode","CENTER","textAlign","colorMode","HSB","frameRate","Camera","draw","cou","_wordBlocks","_blocks","AutoCamera","ZoomCamera","getActiveGridSize","_isInit","background","beat","findBeat","CORNER","offset","x1","isInit","update","init_interlude","update_interlude","_x","_y","scale","zoom","setInit","update_postlude","postludeProcess","_startTime","setChorusPos","_posX_chorus","_posY_chorus","updateChorus_fadeIn","displayChorusText","_isVanished","_isDisplayed","displayText","_col","update_fadein","drawMulti","SCREEN","mousePressed","isPlaying","mouseX","mouseY","selectGridPos","toString","getText","vanishCount","createVector","_zoom","key","distScale","distX","distY","preScale","zoomInit","Date","quintOut","xsize","ysize","preX","preY","distSet","stopTime","isMove","moveLimit","isEnd","quickMove","distAngle","displayedWords","_posX","_posY","_dir","limitSet","currentBlock","limit","tmpIndex","nextBlock","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"..","sourcesContent":["export class Block {\n  constructor(p, charOb, x, y, col, char, parent) {\n    this.p = p;\n    this.charOb = charOb;\n    this.blockSize = 100;\n    this.x = x;\n    this.posX = (this.x * this.blockSize) + (this.blockSize / 2);\n    this.y = y;\n    this.posY = (this.y * this.blockSize) + (this.blockSize / 2);\n    this.col = col;\n    this.char = char;\n    this.parent = parent;\n    //console.log(\"-----this is Block-----\");\n    this.startTime = charOb.startTime;\n    this.endTime = charOb.endTime;\n/*\n    console.log(char);\n    console.log(\"startTime : \" + this.startTime);\n    console.log(\"endTime : \" + this.endTime);\n    */\n    this.isDisplayed = false;\n  }\n\n  display() {\n    const p = this.p;\n    p.push();\n    p.translate(this.posX, this.posY);\n    p.noStroke();\n    p.fill(this.col);\n    p.rect(0, 0, this.blockSize, this.blockSize);\n    p.pop();\n  }\n\n  displayText() {\n    const p = this.p;\n    p.textSize(100);\n    p.push();\n    p.translate(this.posX, this.posY);\n    p.noStroke();\n    p.fill(this.col);\n    p.text(this.char, 0, 0);\n    p.pop();\n    this.isDisplayed = true;\n  }\n\n  displayTextRotate(bottom) {\n    const p = this.p;\n    let rad;\n    switch(bottom) {\n      case 'B':\n        rad = 0;\n        break;\n      case 'T':\n        rad = p.radians(180);\n        break;\n      case 'L':\n        rad = p.radians(90);\n        break;\n      case 'R':\n        rad = p.radians(-90);\n        break;\n    }\n    p.textSize(100);\n    p.push();\n    p.translate(this.posX, this.posY);\n    p.rotate(rad);\n    p.noStroke();\n    p.fill(this.col);\n    p.text(this.char, 0, 0);\n    p.pop();\n  }\n\n  get X() {\n    return this.x;\n  }\n  get Y() {\n    return this.y;\n  }\n  get _startTime() {\n    return this.startTime;\n  }\n  get _endTime() {\n    return this.endTime;\n  }\n  get _isDisplayed() {\n    return this.isDisplayed;\n  }\n}\n","export class Empty {\n  constructor(y, x) {\n    this.initPos = new Array(2);\n    this.initPos[0] = x;\n    this.initPos[1] = y;\n    this.row_poses = new Array();\n    this.row_poses.push(this.initPos);\n    this.col_poses = new Array();\n    this.col_poses.push(this.initPos);\n    this.key_row_poses = new Array();\n    this.key_row_poses.push(this.initPos);\n    this.key_col_poses = new Array();\n    this.key_col_poses.push(this.initPos);\n\n    this.rowleng = 0;\n    this.colleng = 0;\n  }\n\n  setPos(y, x, s, isKey) {\n    const pos = new Array(2);\n    pos[0] = x;\n    pos[1] = y;\n    if(s === 'row') {\n      if(isKey) this.key_row_poses.push(pos);\n      this.row_poses.push(pos);\n    } else if(s === 'col') {\n      if(isKey) this.key_col_poses.push(pos);\n      this.col_poses.push(pos);\n    }\n  }\n\n  sortDataBy(which) {\n    if(which === 'row') {\n      this.row_poses.sort(function(a, b) {\n        return a[0] - b[0];\n      });\n    } else if(which === 'col') {\n      this.col_poses.sort(function(a, b) {\n        return a[1] - b[1];\n      });\n    }\n  }\n\n  withinRowleng(num) {\n    if(num <= this.row_poses.length) return true;\n    else return false;\n  }\n  withinColleng(num) {\n    if(num <= this.col_poses.length) return true;\n    else return false;\n  }\n\n  get rowPoses() {\n    return this.row_poses;\n  }\n  get colPoses() {\n    return this.col_poses;\n  }\n  get keyRowPoses() {\n    return this.key_row_poses;\n  }\n  get keyColPoses() {\n    return this.key_col_poses;\n  }\n}\n","export class SpiralScan {\n  constructor(startX, startY) {\n    this.length = 1;\n    this.now = 1;\n    this.d = 1;\n    this.isFirst = true;\n    this.direct = ['N', 'E', 'S', 'W'];\n    //this.n = (this.w) * (this.h) -1;\n    this.x = startX;\n    this.y = startY;\n  }\n\n  scanGrid() {\n    const d0 = this.direct[this.d % 4];\n    if(d0 == 'N') {\n      this.y--;\n    } else if(d0 == 'S') {\n      this.y++;\n    } else if(d0 == 'E') {\n      this.x++;\n    } else if(d0 == 'W') {\n      this.x--;\n    }\n    this.length--;\n\n    if(!this.isFirst && this.length == 0) {\n      this.isFirst = true;\n      this.now++;\n      this.length = this.now;\n      this.d++;\n    } else if(this.length == 0) {\n      this.length = this.now;\n      this.isFirst = false;\n      this.d++;\n    }\n  }\n  \n  get _x() {\n    return this.x;\n  }\n  get _y() {\n    return this.y;\n  }\n}\n","export const drawGrid = (p, width, height) => {\n  const col = height / 100;\n  const row = width / 100;\n  const size = 100;\n  p.strokeWeight(1);\n  p.stroke(255);\n  p.noFill();\n  for (let i = 0; i <  row; i++) {\n    p.line(i * size, 0, i * size, col * size);\n  }\n\n  for (let i = 0; i < col; i++) {\n    p.line(0, i * size, row * size, i * size);\n  }\n};\n\n//テキストサイズの配列から二次元配列へ\n//row bottom\nexport const sizelistTo2Darray_N = sizelist => {\n  const yleng = Math.max(...sizelist);\n  const xleng = sizelist.reduce((sum, num) => sum + num, 0);\n  const res = new Array(yleng);\n  for(let y = 0; y < yleng; y++) {\n    res[y] = new Array();\n  }\n\n  for(let y = 0; y < yleng; y++) {\n    for(let i = 0; i < sizelist.length; i++) {\n      const insertNum = 0;\n      if((res.length - y) <= sizelist[i]) insertNum = 5;\n      let count = 0;\n      while(count < sizelist[i]) {\n        res[y].push(insertNum);\n        count++;\n      }\n    }\n  }\n  return res;\n};\n\n//col left\nexport const sizelistTo2Darray_E = sizelist => {\n  const yleng = sizelist.reduce((sum, num) => sum + num, 0);\n  const xleng = Math.max(...sizelist);\n\n  const res = new Array(yleng);\n  for(let y = 0; y < yleng; y++) {\n    res[y] = new Array();\n  }\n\n  let col = 0;\n  for(let i = 0; i < sizelist.length; i++) {\n    const num = sizelist[i];\n    for(let j = 0; j < num; j++) {\n      let count = 0;\n      while(count < xleng) {\n        let insertNum = 0;\n        if(count < num) insertNum = 5;\n        res[col].push(insertNum);\n        count++;\n      }\n      col++\n    }\n  }\n  return res;\n};\n\n//col right\nexport const sizelistTo2Darray_W = sizelist => {\n  const arr = sizelistTo2Darray_E(sizelist);\n  //const arr = sizelist_E;\n  for(let i of arr) {\n    i.reverse();\n  }\n  arr.reverse();\n  return arr;\n};\n\n//row top\nexport const sizelistTo2Darray_S = sizelist => {\n  const arr = sizelistTo2Darray_N(sizelist);\n  //const arr = sizelist_N;\n  for(let i of arr) {\n    i.reverse();\n  }\n  arr.reverse();\n  return arr;\n};\n","import { Empty } from './Empty';\nimport { SpiralScan } from './SpiralScan';\nimport { sizelistTo2Darray_N, sizelistTo2Darray_E, sizelistTo2Darray_W, sizelistTo2Darray_S } from './drawGrid';\n\nexport class Grid {\n  constructor(p, canvasW, canvasH) {\n    this.p = p;\n\n    //グリッドの大きさを指定\n    this.canvasW = canvasW;\n    this.canvasH = canvasH;\n    //グリッドからマス目\n    this.w = this.canvasW / 100;\n    this.h = this.canvasH / 100;\n    this.centerPos = [ Math.floor(this.w / 2), Math.floor(this.h / 2)];\n\n    console.log(\"center is\" + this.centerPos);\n    this.grid = new Array(this.h);\n    for(let y = 0; y < this.h; y++) {\n      this.grid[y] = new Array(this.w).fill(0);\n    }\n    this.empty = new Array();\n    this.setInitFill();\n\n    this.spiralScan = new SpiralScan(this.centerPos[0], this.centerPos[1]);\n  }\n\n  setInitFill() {\n    this.grid[this.centerPos[1]][this.centerPos[0]] = 1;\n    //this.printGrid();\n    this.deleteZero();\n    this.setEmpty();\n    //this.printGrid();\n    //this.searchGrid();\n    //this.printEmpty();\n    //console.log(this.empty);\n  }\n\n  setFilled(x, y) {\n    this.grid[y][x] = 1;\n  }\n\n  setEmpty() {\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        if(this.grid[y][x] == 1) {\n          let tmp = 0;\n          //上方向の空白マス\n          tmp = y - 1;\n          while(0 <= tmp) {\n            if(this.grid[tmp][x] == 1) {\n              break;\n            } else if(y - tmp == 1) {\n              this.grid[tmp][x] = 3;\n            } else if(this.grid[tmp][x] == 3) {\n              this.grid[tmp][x] = 3;\n            } else {\n              this.grid[tmp][x] = 2;\n            }\n            tmp--;\n          }\n\n          tmp = y + 1;\n          //下方向の空白マス\n          while(tmp < this.h) {\n            if(this.grid[tmp][x] == 1) {\n              break;\n            } else if(tmp - y == 1) {\n              this.grid[tmp][x] = 3;\n            } else if(this.grid[tmp][x] == 3) {\n              this.grid[tmp][x] = 3;\n            } else {\n              this.grid[tmp][x] = 2;\n            }\n            tmp++;\n          }\n\n          tmp = x - 1;\n          //左方向の空白マス\n          while (0 <= tmp) {\n            if(this.grid[y][tmp] == 1) {\n              break;\n            } else if(x - tmp == 1) {\n              this.grid[y][tmp] = 3;\n            } else if(this.grid[y][tmp] == 3) {\n              this.grid[y][tmp] = 3;\n            } else {\n              this.grid[y][tmp] = 2;\n            }\n            tmp--;\n          }\n\n          tmp = x + 1;\n          //右方向の空白マス\n          while (tmp < this.w) {\n            if(this.grid[y][tmp] == 1) {\n              break;\n            } else if(tmp - x == 1) {\n              this.grid[y][tmp] = 3;\n            } else if(this.grid[y][tmp] == 3) {\n              this.grid[y][tmp] = 3;\n            } else {\n              this.grid[y][tmp] = 2;\n            }\n            tmp++;\n          }\n\n        }\n      }\n    }\n  }\n\n  printGrid() {\n    let t = \"\";\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        t += \"|\" + this.grid[y][x];\n      }\n      t += \"\\n\";\n    }\n    console.log(t);\n  }\n\n  displayPoint() {\n    const p = this.p;\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        if (this.grid[y][x] != 1 && this.grid[y][x] != 0) {\n          if(this.grid[y][x] == 2) {\n            p.noStroke();\n            p.fill(p.color(0, 0, 255));\n            p.ellipse(this.getCoord(x), this.getCoord(y), 10, 10);\n          } else if(this.grid[y][x] == 3) {\n            p.noStroke();\n            p.fill(p.color(255, 0, 0));\n            p.ellipse(this.getCoord(x), this.getCoord(y), 10, 10);\n          }\n        }\n      }\n    }\n  }\n\n  searchGrid() {\n    this.empty.splice(0);\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        if(this.grid[y][x] == 3) {\n          const e = new Empty(y, x);\n\n          let tmp = 0;\n          let s = \"\";\n\n          s = \"col\";\n          //上方向\n          tmp = y - 1;\n          while(0 <= tmp) {\n            if(this.grid[tmp][x] == 1) {\n              break;\n            } else if(this.grid[tmp][x] == 2) {\n              e.setPos(tmp, x, s, false);\n            } else if(this.grid[tmp][x] == 3) {\n              e.setPos(tmp, x, s, true);\n            }\n            tmp--;\n          }\n          //下方向\n          tmp = y + 1;\n          while(tmp < this.h) {\n            if(this.grid[tmp][x] == 1) {\n              break;\n            } else if(this.grid[tmp][x] == 2) {\n              e.setPos(tmp, x, s, false);\n            } else if(this.grid[tmp][x] == 3) {\n              e.setPos(tmp, x, s, true);\n            }\n            tmp++;\n          }\n\n          s = \"row\";\n          //左方向\n          tmp = x - 1;\n          while (0 <= tmp) {\n            if(this.grid[y][tmp] == 1) {\n              break;\n            } else if(this.grid[y][tmp] == 2) {\n              e.setPos(y, tmp, s, false);\n            } else if(this.grid[y][tmp] == 3) {\n              e.setPos(y, tmp, s, true);\n            }\n            tmp--;\n          }\n          //右方向の空白\n          tmp = x + 1;\n          while (tmp < this.w) {\n            if(this.grid[y][tmp] == 1) {\n              break;\n            } else if(this.grid[y][tmp] == 2) {\n              e.setPos(y, tmp, s, false);\n            } else if(this.grid[y][tmp] == 3) {\n              e.setPos(y, tmp, s, true);\n            }\n            tmp++;\n          }\n\n          this.empty.push(e);\n        }\n      }\n    }\n  }\n\n  deleteZero() {\n    for(let y = 0; y < this.h; y++) {\n      for(let x = 0; x < this.w; x++) {\n        if(this.grid[y][x] == 0) this.grid[y][x] = 2;\n      }\n    }\n  }\n\n  getEmptyPoses(textleng, which) {\n    let withinPos = new Array();\n    for(let e of this.empty) {\n      if(which === 'row') {\n        if(e.withinRowleng(textleng)) withinPos.push(e);\n      } else if(which === 'col') {\n        if(e.withinColleng(textleng)) withinPos.push(e);\n      }\n    }\n    const index = Math.floor(Math.random() * withinPos.length);\n    const res = withinPos[index];\n\n    return res;\n  }\n\n  getCoord(num) {\n    return (num * 100) + 50;\n  }\n\n  printEmpty() {\n    console.log(\"this is print empty : row\");\n    for(const l of this.empty) {\n      console.log(l.row_poses);\n    }\n    console.log(\"this is print empty : col\");\n    for(const l of this.empty) {\n      console.log(l.col_poses);\n    }\n  }\n\n  getAllAngleArray(sizelist) {\n    const hash = {};\n    hash['N'] = sizelistTo2Darray_N(sizelist);\n    hash['E'] = sizelistTo2Darray_E(sizelist);\n    hash['W'] = sizelistTo2Darray_W(sizelist);\n    hash['S'] = sizelistTo2Darray_S(sizelist);\n    return hash;\n\n    /*\n    const arr = new Array();\n    arr.push(sizelistTo2Darray_N(sizelist));\n    console.log(\"N : \"+arr[0]);\n    arr.push(sizelistTo2Darray_E(sizelist));\n    console.log(\"E : \"+arr[1]);\n    arr.push(sizelistTo2Darray_W(arr[1]));\n    console.log(\"W : \"+arr[2]);\n    arr.push(sizelistTo2Darray_S(arr[0]));\n    console.log(\"S : \"+arr[3]);\n    return arr;\n    */\n  }\n\n  SearchGridBySizeable(text, sizelist) {\n    //console.log(\"this is testSearchGrid\");\n    //console.log(text + ' / ' +sizelist);\n    const allAngleArray = this.getAllAngleArray(sizelist);\n    let reservedPos = new Array();\n    let outerReserve = new Array();\n    let n = (this.w) * (this.h) -1;\n    for(let i = 0; i < n; i++) {\n      this.spiralScan.scanGrid();\n      const y = this.spiralScan.y;\n      const x = this.spiralScan.x;\n      if(y < 0 || y >= this.h ||x < 0 || x >= this.w) continue;\n      if(this.grid[y][x] == 3) {\n        //ターゲットを走査\n        const used = new Array();\n        let rotationList = ['N', 'E', 'W', 'S'];\n        //let rotation;\n\n        let num = 0;\n        while(num < Object.keys(allAngleArray).length) {\n          if(!used.length) rotationList = rotationList.filter(i => used.indexOf(i) == -1);\n          const index = Math.floor(Math.random() * rotationList.length);\n          const targetArr = allAngleArray[rotationList[index]];\n          for(let ty = 0; ty < targetArr.length; ty++) {\n            for(let tx = 0; tx < targetArr[ty].length; tx++) {\n              if(targetArr[ty][tx] == 5) {\n                let tmpY = y;\n                let ok = 0;\n                let arr;\n                let isLoop = true;\n\n                if(ty > 0) {\n                  tmpY = tmpY - ty;\n                }\n                //reservedPos.splice(0);\n                let reservedPos = new Array();\n\n                while(ok < targetArr.length) {\n                  const startPos = x - tx;\n                  const endPos = x + (targetArr[ty].length - tx );\n                  if(tmpY < 0 || tmpY+ok >= this.h) break;\n                  if(endPos > this.w) break;\n                  arr = this.grid[ tmpY + ok ].slice(startPos, endPos);\n                  if(arr.length == 0)  break;\n                  /*\n                  if(text === '掛け替えの' || text === '鳴り響け'　|| text === 'Memory') {\n                    console.log(text+ \" \"+arr);\n                  }\n                  */\n                  for(let n = 0; n < arr.length; n++) {\n                    const res = this.isEqual(arr[n], targetArr[ok][n]);\n                    if(res == -1) {\n                      continue;\n                    } else if(res == 0) {\n                      isLoop = false;\n                      break;\n                    } else if(res == 1) {\n                      const t = [ tmpY + ok, startPos + n];\n                      reservedPos.push(t);\n                    }\n                  }\n                  if(!isLoop) break;\n                  ok++;\n                }\n                if(ok == targetArr.length) { //入るマスが見つかった状態\n                  if(reservedPos.length == 0) {\n                    console.log(\"から！！！！\");\n                    console.log(ok);\n                    console.log(arr);\n                  }\n                  //console.log(reservedPos);\n                  const reserved = this.makeAarray(index, reservedPos, text, sizelist);\n                  //outerReserve.push(reserved);\n                  return reserved;\n                }\n              }\n            }\n          }\n          used.push(index);\n          num++;\n        }\n        //return outerReserve;\n      }\n    }\n    //return outerReserve;\n  }\n\n  makeAarray(index, reservedPos, text, sizelist) {\n    let dir = '';\n    switch(index) {\n      case 0:\n        dir = 'N';\n        break;\n      case 1:\n        dir = 'E';\n        break;\n      case 2:\n        dir = 'W';\n        break;\n      case 3:\n        dir = 'S';\n        break;\n    }\n    const reserved = this.sortDataBy(dir, reservedPos, sizelist, text);\n    return reserved;\n  }\n\n  sortDataBy(dir, array, sizelist, text) {\n    //console.log(\"sortDataBy です\");\n    //console.log(array);\n    //文字方向によってソート順を変える\n    if(dir === 'N') {\n      array.sort(function(a, b) {\n        return a[1] - b[1];\n      });\n    } else if(dir === 'S') {\n      array.sort(function(a, b) {\n        return b[1] - a[1];\n      });\n    } else if(dir === 'E') {\n      array.sort(function(a, b) {\n        return a[0] - b[0];\n      });\n    } else if(dir === 'W') {\n      array.sort(function(a, b) {\n        return b[0] - a[0];\n      });\n    }\n\n    const sizedPos = new Array();\n    let increment = 0;\n    for(const size of sizelist) {\n      const leng = increment + size * size;\n      sizedPos.push(array.slice(increment, leng));\n      increment = leng;\n    }\n    const res = new Array();\n    //連想配列をつくる\n    for(let i = 0; i < sizelist.length; i++) {\n      res.push({text: text.split('')[i], dir: dir, size: sizelist[i], pos: sizedPos[i]});\n    }\n\n    return res;\n  }\n\n  isEqual(num1, num2) {\n    if(num2 == 0) return -1;\n    if(num1 == 3 || num1 == 2) num1 = 5;\n    if(num1 == num2) return 1;\n    return 0;\n  }\n\n  isEqualArray(array1, array2) {\n    let i = array1.length;\n    if(i != array2.length) return false;\n    while(i--) {\n      const a1 = array1[i];\n      if(array2[i] == 0) continue;\n      if(a1 == 3 || a1 == 2) array1[i] = 5;\n      if(array1[i] !== array2[i]) return false;\n    }\n    return true;\n  }\n\n  getActiveGridSize(position, wordBlocks) {\n    const activeGrid = new Array(this.h);\n    for(let y = 0; y < this.h; y++) {\n      activeGrid[y] = new Array(this.w).fill(0);\n    }\n\n    const getGridSize = grid => {\n      const xleng = { minX: grid[0].length, maxX: 0 };\n      const yleng = { minY: grid.length, maxY: 0 };\n      for(let y = 0; y < grid.length; y++) {\n        for(let x = 0; x < grid[y].length; x++) {\n          if(grid[y][x] == 1) {\n            if(x < xleng['minX']) xleng['minX'] = x;\n            if(x > xleng['maxX']) xleng['maxX'] = x;\n            if(y < yleng['minY']) yleng['minY'] = y;\n            if(y > yleng['maxY']) yleng['maxY'] = y;\n          }\n        }\n      }\n      let sizeX = 0;\n      let sizeY = 0;\n      //中心からの距離が長い方を抽出\n      if(Math.abs(this.centerPos[0] - xleng['minX']) < Math.abs(this.centerPos[0] - xleng['maxX'])) {\n        sizeX = Math.abs(this.centerPos[0] - xleng['maxX']) * 2;\n      } else {\n        sizeX = Math.abs(this.centerPos[0] - xleng['minX']) * 2;\n      }\n      if(Math.abs(this.centerPos[1] - yleng['minY']) < Math.abs(this.centerPos[1] - yleng['maxY'])) {\n        sizeY = Math.abs(this.centerPos[1] - yleng['maxY']) * 2;\n      } else {\n        sizeY = Math.abs(this.centerPos[1] - yleng['minY']) * 2;\n      }\n      const result = { sizeX: sizeX + 1, sizeY: sizeY + 1 };\n      return result;\n    };\n\n    for(const w of wordBlocks) {\n      if(w.startTime < position) {\n        for(const pos of w._posInGrid) {\n          activeGrid[pos[0]][pos[1]] = 1;\n        }\n      }\n    }\n    //this.printActiveGrid(activeGrid);\n    return getGridSize(activeGrid);\n  }\n\n  printActiveGrid(grid) {\n    let t = \"\";\n    for(let y = 0; y < grid.length; y++) {\n      for(let x = 0; x < grid[0].length; x++) {\n        t += \"|\" + grid[y][x];\n      }\n      t += \"\\n\";\n    }\n    console.log(t);\n  }\n}\n","import { chorus } from './index.js';\nimport { canvasW, canvasH } from './index.js';\nimport { globalBlockSize, time_fadein, time_fadeout } from './index.js';\nconst { Ease } = TextAliveApp;\n\n\nexport class SizingBlock {\n  constructor(p, charOb, size, dir, posArray, col, parent) {\n    this.p = p;\n    this.charOb = charOb;\n\n    this.blockSize = size * globalBlockSize;\n    this.char = charOb.text;\n    this.posArray = posArray;\n    this.posX = 0;\n    this.posY = 0;\n    this.calcPos();\n\n    this.alpha = 0;\n    //this.col = col;\n    this.col = p.color(0, 0, 100);\n\n    this.dir = dir;\n    this.parent = parent;\n\n    this.startTime = charOb.startTime;\n    this.endTime = charOb.endTime;\n    this.isDisplayed = false;\n    this.displayTime = this.endTime - this.startTime;\n    //console.log(this.char + ' | '+ this.startTime);\n    //console.log(this.posArray);\n    this.isChorus;\n    this.getIsChorus();\n\n    //this.chorusX = 0;\n    //this.chorusY = 0;\n    this.chorusX = Math.floor(Math.random() * 50);\n    this.chorusY = Math.floor(Math.random() * 50);\n    //console.log(this.char + \" | \" + this.isChorus);\n    //this.chorusCol = this.p.color(Math.floor(Math.random() * 255), Math.floor(Math.random() * 255), Math.floor(Math.random() * 255));\n\n    if(!isFinite(this.posX) || !isFinite(this.posY)) {\n      console.log(\"ブロック [\"+this.char+\"] は異常値です。\");\n      console.log(\"ブロック情報 | 文字 : \"+this.char+ \" posX : \"+this.posX+\" posY : \"+this.posY);\n      console.log(this.posArray);\n    }\n\n    //this.distRad;\n    this.angle;\n    switch(this.dir) {\n      case 'N':\n        this.angle = 0;\n        break;\n      case 'S':\n        this.angle = 180;\n        break;\n      case 'E':\n        this.angle = 90;\n        break;\n      case 'W':\n        this.angle = 270;\n        break;\n    }\n    this.distRad = p.radians(this.angle);\n    this.preAngle = this.angle - 90;\n    this.rad = 0;\n    this.isSetChorusPos = false;\n    this.posX_chorus = 0;\n    this.posY_chorus = 0;\n    this.size_chorus = 0;\n    this.alpha_chorus = 0;\n    this.col_chorus = p.color(100, 0, 100);\n    this.col_chorusOut = p.color(Math.floor(Math.random() * 100), 100, 100);\n    //console.log(\"ブロックpos : \" + this.posX + \" / \"+ this.posY);\n    this.isVanished = false;\n  }\n\n  update_fadein(position) {\n    const p = this.p;\n    const progress = 1 - (this.startTime - position) / time_fadein;\n    const eased = Ease.quintIn(progress);\n    this.alpha = 100 * eased;\n    //this.col = p.color(255, 0, 0, this.alpha);\n    this.col.setAlpha(this.alpha);\n    let r = 90 * eased;\n    r = p.constrain(r, 0, 90);\n    const a = this.preAngle + r;\n    this.rad = p.radians(a);\n    //console.log(this.char + \" / \" + progress + ' : ' + eased + ' : ' + this.alpha);\n    //console.log(this.char + \" / \" + progress + ' : ' + this.preAngle + ' : ' + r);\n\n    if(progress > 1) this.isDisplayed = true;\n  }\n\n  update_fadeout(position) {\n\n  }\n\n  displayText() {\n    const p = this.p;\n    p.textSize(this.blockSize);\n    p.push();\n    p.translate(this.posX, this.posY);\n    p.rotate(this.rad);\n    p.noStroke();\n    p.fill(this.col);\n    p.text(this.char, 0, 0);\n    p.pop();\n    //this.isDisplayed = true;\n  }\n\n  calcPos() {\n    if(this.posArray.length == 1) {\n      const pos = this.posArray[0];\n      this.posX = (pos[1] * globalBlockSize) + (this.blockSize / 2);\n      this.posY = (pos[0] * globalBlockSize) + (this.blockSize / 2);\n    } else {\n      let x = new Array();\n      let y = new Array();\n      for(const a of this.posArray) {\n        x.push(a[1]);\n        y.push(a[0]);\n      }\n      const minX = Math.min(...x);\n      const minY = Math.min(...y);\n      this.posX = (minX * globalBlockSize) + (this.blockSize / 2);\n      this.posY = (minY * globalBlockSize) + (this.blockSize / 2);\n    }\n  }\n\n  getIsChorus() {\n    for(const c of chorus) {\n      if(c.startTime <= this.startTime &&  this.startTime <= c.endTime) {\n        this.isChorus = true;\n        return;\n      }\n    }\n    this.isChorus = false;\n  }\n\n  updateChorus_fadeIn(position) {\n    const p = this.p;\n    const progress = 1 - (this.startTime - position) / 500;\n    const eased = Ease.quintIn(progress);\n    //this.size_chorus = 1200 * eased;\n    const al = 100 * eased;\n    this.col_chorus.setAlpha(100 * eased);\n    //console.log(this.col_chorus);\n    //if(progress > 1) this.col_chorus = this.col_chorusOut;\n  }\n\n  displayChorusText() {\n    const p = this.p;\n    p.push();\n    p.textSize(this.size_chorus);\n    p.blendMode(p.EXCLUSION);\n    p.translate(this.posX_chorus, this.posY_chorus);\n    p.noStroke();\n    p.fill(this.col_chorus);\n    p.text(this.char, 0, 0);\n\n    //p.blendMode(p.HARD_LIGHT);\n    /*\n    p.fill(p.color(20, 80, 100, 80));\n    p.text(this.char, this.chorusX, 20);\n    p.fill(p.color(50, 80, 100, 80));\n    p.text(this.char, -20, -this.chorusY);\n    */\n\n    p.pop();\n    //this.isDisplayed = true;\n  }\n\n  updateChorus_fadeOut(position) {\n    const p = this.p;\n    const progress = 1 - (position - this.endTime) / 500;\n    const eased = Ease.quintIn(progress);\n    //this.size_chorus = 1200 * eased;\n    const al = 100 - 100 * eased;\n    //this.col_chorus = this.col_chorusOut;\n    this.col_chorus.setAlpha(al);\n    console.log(al);\n\n  }\n\n  setChorusPos(sizeX, sizeY) {\n    this.size_chorus = 1200;\n    const minX = (canvasW / 2) - ((sizeX * globalBlockSize) / 2) + (this.size_chorus / 2);\n    const maxX = (canvasW / 2) + ((sizeX * globalBlockSize) / 2) - (this.size_chorus / 2);\n    const minY = (canvasH / 2) - ((sizeY * globalBlockSize) / 2) + (this.size_chorus / 2);\n    const maxY = (canvasH / 2) + ((sizeY * globalBlockSize) / 2) - (this.size_chorus / 2);\n    console.log('sizeX : '+sizeX+' sizeY : '+sizeY+' / minX : '+minX+' maxX : '+maxX);\n    this.posX_chorus = Math.floor(Math.random() * (maxX - minX) + minX);\n    this.posY_chorus = Math.floor(Math.random() * (maxY - minY) + minY);\n    //console.log(this.posX_chorus + ' / '+this.posY_chorus);\n    this.isSetChorusPos = true;\n  }\n\n  get _text() {\n    return this.char;\n  }\n  get _posX() {\n    return this.posX;\n  }\n  get _posY() {\n    return this.posY;\n  }\n  get _startTime() {\n    return this.startTime;\n  }\n  get _endTime() {\n    return this.endTime;\n  }\n  get _isDisplayed() {\n    return this.isDisplayed;\n  }\n  get _isSetChorusPos() {\n    return this.isSetChorusPos;\n  }\n  get _posX_chorus() {\n    return this.posX_chorus;\n  }\n  get _posY_chorus() {\n    return this.posY_chorus;\n  }\n  get _isVanished() {\n    return this.isVanished;\n  }\n  set _col(col) {\n    this.col = col;\n  }\n  set _isVanished(bool) {\n    this.isVanished = bool;\n  }\n\n}\n","import { Block } from './Block';\nimport { Empty } from './Empty';\nimport { Grid } from './Grid';\nimport { SizingBlock } from './SizingBlock';\nimport { globalBlockSize } from './index.js';\n\n\nexport class WordBlock {\n  constructor(p, g, wordObArray, text, col) {\n    this.p = p;\n    this.g = g;\n    //console.log(\"this is chainblock  text length:\"+ word.text.length + \" which: \" + which);\n    //this.g.searchGrid();\n    this.wordObArray = wordObArray;\n    this.text = text;\n    this.charArray = this.text.split('');\n    this.sizelist = this.makeSizeList();\n\n    //charごとの連想配列\n    this.aArray = this.g.SearchGridBySizeable(text, this.sizelist);\n    //console.log(\"ワードブロックです\");\n    //console.log(this.aArray);\n    const dirA = this.aArray[0];\n    this.dir = dirA['dir'];\n    /*\n    this.empty = this.g.getEmptyPoses(text.length, which);\n    if(this.empty　=== undefined) console.log(\"見つかりませんですた！！\");\n    this.empty.sortDataBy(which);\n    */\n\n    this.col = p.color(Math.floor(Math.random() * 100), 100, 70);\n    this.blocks = new Array(text.length);\n    //this.which = which;\n    //this.bottom = bottom;\n\n    this.displayChildrenCount = 0;\n    this.isDisplayAll = false;\n    /*\n    console.log(\"this is ChainBlock\");\n    console.log(wordObArray);\n    console.log(this.wordObArray[0].children);\n    */\n    const l = this.wordObArray[0].children;\n    //console.log(l[0]);\n    //console.log(text);\n    this.charObArray = new Array();\n\n    this.startTime = null;\n    this.endTime = null;\n    for(const w of this.wordObArray) {\n      for(const x of w.children) {\n        this.charObArray.push(x);\n        if(x.startTime < this.startTime || !this.startTime) this.startTime = x.startTime;\n        if(x.endTime > this.endTime || !this.endTime) this.endTime = x.endTime;\n      }\n    }\n\n    this.posX;\n    this.posY;\n    this.calcPos();\n\n    this.posInGrid;\n    this.makePosInGrid();\n\n    this.makeBlock();\n  }\n\n  makeBlock() {\n    let i = 0;\n    for(const a of this.aArray) {\n      this.blocks[i] = new SizingBlock(this.p, this.charObArray[i], a['size'], a['dir'], a['pos'], this.col, this);\n      //console.log(this.charObArray[i] +\" | \"+a['dir']+\" | \"+a['pos']);\n      for(const p of a['pos']) this.g.setFilled(p[1], p[0]);\n      i++;\n    }\n\n    /*\n    const sp = this.selectPos();\n    for(const pos of sp) {\n      this.blocks[i] = new Block(this.p, this.charObArray[i], pos[0], pos[1], this.col, this.charArray[i], this);\n      this.g.setFilled(pos[0], pos[1]);\n      i++;\n    }\n    */\n    this.g.setEmpty();\n  }\n\n  selectPos() {\n    const poses = this.which === 'col' ? this.empty.colPoses : this.empty.rowPoses;\n    const keyPoses = this.which === 'col' ? this.empty.keyColPoses : this.empty.keyRowPoses;\n\n    //隣接マスをランダムに決定\n    let index = Math.floor(Math.random() * keyPoses.length);\n    const keyPos = keyPoses[index];\n\n    let keyindex = 0;\n    let i = 0;\n    //隣接マスのインデックスを探索\n    for(const pos of poses) {\n      if(keyPos[0] == pos[0] && keyPos[1] == pos[1]) {\n        keyindex = i;\n        //println(\"get index! :\"+keyindex);\n        break;\n      }\n      i++;\n    }\n    //println(\"pos array size is\"+posArray.size());\n    let reservedPos = new Array();\n    reservedPos.push(keyPos);\n\n    index = keyindex;\n    let previndex = index - 1;\n    let nextindex = index + 1;\n    let seq = true;\n    while(reservedPos.length < this.text.length) {\n      //booleanをランダム生成\n      seq = Math.random() < 0.5;\n      if(nextindex >= poses.length) seq = false;\n      if(previndex < 0) seq = true;\n\n      if(seq) {\n        reservedPos.push(poses[nextindex]);\n        nextindex += 1;\n      } else {\n        reservedPos.push(poses[previndex]);\n        previndex -= 1;\n      }\n    }\n\n    return this.sort(reservedPos);\n  }\n\n  sort(array) {\n    if(this.which === 'row') {\n      if(this.bottom === 'B') {\n        array.sort(function(a, b) {\n          return a[0] - b[0];\n        });\n      } else if(this.bottom === 'T') {\n        array.sort(function(a, b) {\n          return b[0] - a[0];\n        });\n      }\n\n    } else if(this.which === 'col') {\n      if(this.bottom === 'L') {\n        array.sort(function(a, b) {\n          return a[1] - b[1];\n        });\n      } else if(this.bottom === 'R') {\n        array.sort(function(a, b) {\n          return b[1] - a[1];\n        });\n      }\n    }\n    return array;\n  }\n\n  display() {\n    for(let b of this.blocks) {\n      b.displayTextRotate(this.bottom);\n    }\n  }\n\n  update() {\n  }\n\n  get getText() {\n    return this.text;\n  }\n\n  //子要素が全て描画されたらboolをtrueにする\n  inrementDisplayChildrenCount() {\n    this.displayChildrenCount++;\n    if(this.displayChildrenCount == this.blocks.length) {\n      this.isDisplayAll = true;\n    }\n  }\n\n  makeSizeList() {\n    const sizelist = new Array();\n    //漢字判定の正規表現\n    const regexp = /([\\u{3005}\\u{3007}\\u{303b}\\u{3400}-\\u{9FFF}\\u{F900}-\\u{FAFF}\\u{20000}-\\u{2FFFF}][\\u{E0100}-\\u{E01EF}\\u{FE00}-\\u{FE02}]?)/mu;\n\n    for(const char of this.charArray) {\n      if(regexp.test(char)) sizelist.push(2)\n      else sizelist.push(1);\n    }\n    return sizelist;\n  }\n\n  calcPos() {\n    const xarray = new Array();\n    const yarray = new Array();\n    for(const a of this.aArray) {\n      for(const pos of a['pos']) {\n        xarray.push(pos[1]);\n        yarray.push(pos[0]);\n      }\n    }\n    const originX = Math.min(...xarray);\n    const originY = Math.min(...yarray);\n\n    let yleng = 0;\n    let xleng = 0;\n    if(this.dir === 'N' || this.dir === 'S') {\n      yleng = Math.max(...this.sizelist);\n      xleng = this.sizelist.reduce((sum, num) => sum + num, 0);\n    } else {\n      yleng = this.sizelist.reduce((sum, num) => sum + num, 0);\n      xleng = Math.max(...this.sizelist);\n    }\n\n    this.posX = (originX * globalBlockSize) + ((xleng * globalBlockSize) / 2);\n    this.posY = (originY * globalBlockSize) + ((yleng * globalBlockSize) / 2);\n  }\n\n  makePosInGrid() {\n    const posInGrid = new Array();\n    for(const a of this.aArray) {\n      for(const pos of a['pos']) {\n        posInGrid.push(pos);\n      }\n    }\n    this.posInGrid = posInGrid;\n  }\n\n  get _posInGrid() {\n    return this.posInGrid;\n  }\n\n  get _isDisplayAll() {\n    return this.isDisplayAll;\n  }\n  get _blocks() {\n    return this.blocks;\n  }\n\n  get _posX() {\n    return this.posX;\n  }\n  get _posY() {\n    return this.posY;\n  }\n  get _startTime() {\n    return this.startTime;\n  }\n  get _endTime() {\n    return this.endTime;\n  }\n  get _dir() {\n    return this.dir;\n  }\n}\n","import { WordBlock } from './WordBlock';\n\nexport class PhraseBlock {\n  constructor(p, g, phrase){\n    this.p = p;\n    this.g = g;\n    this.phrase = phrase;\n\n    this.wordObArray = new Array();\n    this.textArr = new Array();\n    this.setArrByPartOfSpeech(phrase);\n\n    if(this.phrase.text.includes('、') || this.phrase.text.includes('。') || this.phrase.text.includes('？') || this.phrase.text.includes('！') || this.phrase.text.includes('!')) this.setArrByPunct();\n\n    if(this.phrase.text.includes('(') || this.phrase.text.includes('「') || this.phrase.text.includes('『')) this.setArrByText();\n\n    if(this.textArr.length != this.wordObArray.length) console.log(\"要素数違うお！\");\n    this.phraseleng = this.textArr.length;\n\n    this.wordBlocks = new Array(this.phraseleng);\n    this.col = p.color(Math.floor(Math.random() * 100), 60, 70);\n\n    this.displayChildrenCount = 0;\n    this.isDisplayAll = false;\n    this.makeWordBlock();\n  }\n\n  makeWordBlock() {\n    for(let i = 0; i < this.phraseleng; i++) {\n      this.wordBlocks[i] = new WordBlock(this.p, this.g, this.wordObArray[i], this.textArr[i], this.col);\n    }\n  }\n\n  display() {\n    for(const w of this.wordBlocks) {\n      w.display();\n    }\n  }\n\n  //指定された品詞をまとめる\n  setArrByPartOfSpeech(phrase) {\n    const words = phrase.children;\n    const textArray = new Array();\n    const wordObArray = new Array();\n    let i = 0;\n    let test = \"\";\n    let isA = false;\n    let tempAtext = \"\";\n    let tempAob;\n    for(const word of words) {\n      test += word.text;\n      test += word.pos+\" | \";\n      //console.log(test);\n      let text = word.text;\n      const w = new Array();\n      if(isA) {\n        text = tempAtext + word.text;\n        w.push(tempAob);\n        tempAtext = \"\";\n        tempAob = null;\n        isA = false;\n      }\n      w.push(word); //wordオブジェクトを配列にする\n      //助詞(P),助動詞(M)のとき前の要素に追加\n      if( (wordObArray[i-1] && word.pos === 'P') || (wordObArray[i-1] && word.pos === 'M') || text === '...') {\n        textArray[i-1] += text;\n        wordObArray[i-1].push(word);\n      //連体詞(A)のとき後ろの要素に追加\n      } else if(word.pos === 'A') {\n        isA = true;\n        tempAtext = word.text;\n        tempAob = word;\n      } else {\n        textArray.push(text);\n        wordObArray.push(w);\n        i++;\n      }\n    }\n    this.wordObArray = wordObArray;\n    this.textArr = textArray;\n  }\n\n  setArrByPunct() {\n    let textA = this.textArr;\n    let obA = this.wordObArray;\n    let tmpText = \"\";\n    let tmpOb = new Array();\n\n    for(let i = 0; i < textA.length; i++) {\n      if(textA[i].includes('、') || textA[i].includes('。') || textA[i].includes('？') || textA[i].includes('！') || textA[i].includes('!')) {\n        const tmpText = textA[i];\n        const tmpOb = obA[i];\n        textA.splice(i, 1);\n        obA.splice(i, 1);\n        textA[i - 1] = textA[i - 1] + tmpText;\n        for(const o of tmpOb) {\n          obA[i - 1].push(o);\n        }\n      }\n    }\n\n    this.textArr = textA;\n    this.wordObArray = obA;\n  }\n\n  setArrByText() {\n    let textA = this.textArr;\n    let obA = this.wordObArray;\n\n    let startIndex = 0;\n    let endIndex = 0;\n    let tmpText = \"\";\n    let tmpOb = new Array();\n    let isStart = false;\n\n    let newA;\n    let no;\n    for(let i = 0; i < textA.length; i++) {\n      if(textA[i].includes('(') || textA[i].includes('「') || textA[i].includes('『')) {\n        isStart = true;\n        startIndex = i;\n        endIndex = i;\n      }\n      if(isStart) {\n        tmpText += textA[i];\n        for(const ob of obA[i]) {\n          tmpOb.push(ob);\n        }\n        if(textA[i].includes(')') || textA[i].includes('」') || textA[i].includes('』')) {\n          textA.splice(startIndex, endIndex);\n          obA.splice(startIndex, endIndex);\n          textA.push(tmpText);\n          obA.push(tmpOb);\n          isStart = false;\n          startIndex = 0;\n          endIndex = 0;\n          tmpText = \"\";\n          tmpOb = new Array();\n        } else {\n          endIndex++;\n        }\n      }\n      //console.log(\" i : \"+i+\" | isStart : \"+isStart+\" | startIndex : \"+startIndex+\" | endIndex : \"+endIndex+ \" | tmpText : \"+tmpText);\n    }\n    this.textArr = textA;\n    this.wordObArray = obA;\n  }\n\n  get _wordBlocks() {\n    return this.wordBlocks;\n  }\n  get _isDisplayAll() {\n    return this.isDisplayAll;\n  }\n}\n","const { Ease } = TextAliveApp;\n\nexport class Ball {\n  constructor(p, x, y) {\n    this.p = p;\n    this.posX = x;\n    this.posY = y;\n    this.size = p.random(400, 800);\n    this.h = p.random(100);\n    this.s = p.random(70, 100);\n    this.b = p.random(80, 100);\n    this.col = p.color(this.h, this.s, this.b);\n    this.col.setAlpha(p.random(p.random(100)));\n\n    this.num = 3;\n    this.posXarray = [];\n    this.posYarray = [];\n    this.sizeArray = [];\n    for(let i = 0; i < this.num; i++) {\n      this.posXarray.push(p.randomGaussian(this.posX, 400));\n      this.posYarray.push(p.randomGaussian(this.posY, 400));\n      this.sizeArray.push(p.random(100, 300));\n    }\n  }\n  update(beatProgress) {\n    const alpha = this.b + 100 * Ease.quintIn(beatProgress);\n    this.col = this.p.color(this.h, this.s, alpha);\n  }\n\n  draw() {\n    this.p.push();\n    this.p.blendMode(this.p.LIGHTEST);\n    this.p.noStroke();\n    this.p.fill(this.col);\n    this.p.circle(this.posX, this.posY, this.size);\n    this.p.pop();\n  }\n\n  drawMulti() {\n    for(let i = 0; i < this.num; i++) {\n      this.p.push();\n      this.p.blendMode(this.p.LIGHTEST);\n      this.p.noStroke();\n      this.p.fill(this.col);\n      this.p.circle(this.posXarray[i], this.posYarray[i], this.sizeArray[i]);\n      this.p.pop();\n    }\n  }\n\n}\n","export const SONG = {\n  \"Loading Memories / せきこみごはん feat. 初音ミク\": {\n    \"songUrl\": \"https://piapro.jp/t/RoPB/20220122172830\",\n    \"video\": {\n      \"beatId\": 4086301,\n      \"chordId\": 2221797,\n      \"repetitiveSegmentId\": 2247682,\n      \"lyricId\": 53718,\n      \"lyricDiffId\": 7076\n    },\n    \"title\": \"Loading Memories\",\n    \"artist\": \"せきこみごはん feat. 初音ミク\"\n  },\n  \"青に溶けた風船 / シアン・キノ feat. 初音ミク\": {\n    \"songUrl\": \"https://piapro.jp/t/9cSd/20220205030039\",\n    \"video\": {\n      \"beatId\": 4083452,\n      \"chordId\": 2221996,\n      \"repetitiveSegmentId\": 2247861,\n      \"lyricId\": 53745,\n      \"lyricDiffId\": 7080\n    },\n    \"title\": \"青に溶けた風船\",\n    \"artist\": \"シアン・キノ feat. 初音ミク\"\n  },\n  \"歌の欠片と / imo feat. MEIKO\": {\n    \"songUrl\": \"https://piapro.jp/t/Yvi-/20220207132910\",\n    \"video\": {\n      \"beatId\": 4086832,\n      \"chordId\": 2222074,\n      \"repetitiveSegmentId\": 2247935,\n      \"lyricId\": 53746,\n      \"lyricDiffId\": 7082\n    },\n    \"title\": \"歌の欠片と\",\n    \"artist\": \"imo feat. MEIKO\"\n  },\n  \"未完のストーリー / 加賀（ネギシャワーP） feat. 初音ミク\": {\n    \"songUrl\": \"https://piapro.jp/t/ehtN/20220207101534\",\n    \"video\": {\n      \"beatId\": 4083459,\n      \"chordId\": 2222147,\n      \"repetitiveSegmentId\": 2248008,\n      \"lyricId\": 53747,\n      \"lyricDiffId\": 7083\n    },\n    \"title\": \"未完のストーリー\",\n    \"artist\": \"加賀（ネギシャワーP） feat. 初音ミク\"\n  },\n  \"みはるかす / ねこむら（cat nap） feat. 初音ミク\": {\n    \"songUrl\": \"https://piapro.jp/t/QtjE/20220207164031\",\n    \"video\": {\n      \"beatId\": 4083470,\n      \"chordId\": 2222187,\n      \"repetitiveSegmentId\": 2248075,\n      \"lyricId\": 53748,\n      \"lyricDiffId\": 7084\n    },\n    \"title\": \"みはるかす\",\n    \"artist\": \"ねこむら（cat nap） feat. 初音ミク\"\n  },\n  \"fear / 201 feat. 初音ミク\": {\n    \"songUrl\": \"https://piapro.jp/t/GqT2/20220129182012\",\n    \"video\": {\n      \"beatId\": 4083475,\n      \"chordId\": 2222294,\n      \"repetitiveSegmentId\": 2248170,\n      \"lyricId\": 53749,\n      \"lyricDiffId\": 7085\n    },\n    \"title\": \"fear\",\n    \"artist\": \"201 feat. 初音ミク\"\n  },\n}\n","const P5 = p5;\nconst { Player, Ease } = TextAliveApp;\nimport { Block } from './Block';\nimport { Grid } from './Grid';\nimport { drawGrid } from './drawGrid';\nimport { WordBlock } from './WordBlock';\nimport { PhraseBlock } from './PhraseBlock';\nimport { Ball } from './Ball';\nimport { SONG } from './SONG';\n\nconsole.log(SONG);\n\nlet text;\nlet isAppReady = false;\nlet init = false;\nlet isVideoReady = false;\nlet videoEndTime;\nlet isTimerReady = false;\n\n//const seekBar = document.querySelector(\"#seek-bar\");\n\n\nlet player = new Player({\n\tapp: {token: \"6rquYSfCRiWlgifb\"},\n\n\t// 読み込むフォントを指定する。nullだとすべて読み込む。\n\t//fontFamilies: null,\n\n\t//mediaBannerPosition: \"bottom right\",\n\t// 音源メディアを指定する。\n\tmediaElement: document.querySelector(\"#media\"),\n\n\t// throttleアップデート関数の発行間隔をしていする。ミリセカンド。\n\t//throttleInterval: 10,\n\n\t// TextAlive Playerの音源の再生状態を管理するTimerインスタンス。よくわからん。。。\n\t//timer: ,\n\n\t// V/A空間の座標値を取得するか否か。\n\t// V/A空間について：https://ipsj.ixsq.nii.ac.jp/ej/?action=repository_uri&item_id=142056&file_id=1&file_no=1\n\t// V/A空間は、ある時刻の音源に対する感情の指標である。VはValance(怪ー不快)、Activation(活性ー日活性)の二軸で表される。例えば、喜びは二軸ともに正。\n\tvalenceArousalEnabled: true,\n\n\t// 声量情報を取得するかどうか。\n\tvocalAmplitudeEnabled: true,\n\n});\n\n/////////////////////// イベントリスナを登録する ///////////////////////\n// 3種類のイベントリスナから指定する。PlayerEventListener, PlyaerAppListener, LoaderListener\n// 指定したイベントリスナは、必ずoverrideして定義しなければならない。\n// https://developer.textalive.jp/packages/textalive-app-api/globals.html#playerlistener\nplayer.addListener({\n\t// PlayerEventListenerのイベントリスナ\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/playereventlistener.html\n\tonDispose, \t\t\t\t// プレイヤーが破棄されるとき\n\t//onMediaElementSet,\t \t// 音源メディアが変更されたとき(配属先のDOM要素が変更されたとき)\n\t//onMediaSeek,\t\t\t// 再生中の楽曲の再生位置が変更されたとき\n\t//onPause,\t\t\t\t// 再生中の楽曲が一時停止されたとき\n\t//onPlay,\t\t\t\t\t// 楽曲の再生が始まったとき\n\t//onResize,\t\t\t\t// ステージサイズが変更されたとき（ステージってなに？2021/08/10）\n\t//onSeek,\t\t\t\t\t// 再生中の楽曲の再生位置がユーザーによって変更されたとき\n\t//onStop,\t\t\t\t\t// 再生中の楽曲が一時停止されたとき\n\t//onThrottledTimeUpdate,\t// 動画の再生位置が変更されたときに呼ばれる（あまりに頻繁な発火を防ぐため一定間隔に間引かれる）、間隔時間はPlayerクラスのオプションで設定可能。\n\tonTimeUpdate,\t\t\t// 動画の再生位置が変更されたときに呼ばれる\n\tonTimerReady,\t\t\t// 動画のためのTimerの準備が整ったとき\n\tonVideoReady,\t\t\t// 動画オブジェクトの準備が整ったとき\n\t//onVideoSeek,\t\t\t// 動画のシーク操作が行われたとき\n\tonVideoSeekEnd,\t\t\t// 動画のシーク操作が終わったとき\n\t//onVideoSeekStart,\t\t// 動画のシーク操作が始まったとき\n\t//onVolumeUpdate,\t\t\t// 音量が変更されたとき\n\n\t// PlayerAppListenerのイベントリスナ\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/playerapplistener.html\n\t//onAppConnected, \t\t// TextAliveAppAPIサーバとの接続時に呼ばれる\n\t//onAppMediaChange,\t\t// 再生すべき楽曲URLが変更されたとき\n\t//onAppParameterUpdate,\t// TextAliveアプリのパラメタが変更されたときに呼ばれる\n\tonAppReady,\t\t\t\t// TextAliveホストとの接続時に呼ばれる\n\n\t// LoaderListenerのイベントリスナ。このリスナは、DataLoaderListenerの中で、さらに4つに分かれる。\n\t// DataLoaderListener -> VideoLoaderListener, SongLoaderListener, TextLoaderListener, FontLoaderListener\n\t// ↓ LoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/globals.html#loaderlistener\n\t// ↓ VideoLoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/videoloaderlistener.html\n\t// ↓ SongLoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/songloaderlistener.html\n\t// ↓ TextLoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/textloaderlistener.html\n\t// ↓ FontLoaderListenerのリファレンス\n\t// https://developer.textalive.jp/packages/textalive-app-api/interfaces/fontloaderlistener.html\n\t//onVideoLoad, \t\t\t// 動画データが読み込まれたとき\n\t//onSongInfoLoad,\t\t\t// 楽曲の詳細情報が読み込まれたとき\n\t//onSongLoad,\t\t\t\t// 楽曲の基本情報が読み込まれたとき\n\t//onSongMapLoad,\t\t\t// 楽曲地図が読み込まれたとき\n\t//onValenceArousalLoad,\t// V/A空間が読み込まれたとき\n\t//onVocalAmplitudeLoad,\t// 声量の情報が読み込まれたとき\n\t//onLyricsLoad,\t\t\t// 歌詞テキストの発生タイミング情報が読み込まれたとき\n\t//onTextLoad,\t\t\t\t// 歌詞テキストが読み込まれたとき\n\t//onFontsLoad,\t\t\t// フォントが読み込まれたとき\n\n});\n\n// アニメーション関数の定義、フレーズ、単語、文字\n// フレーズが発声されていたら #text_phrase に表示する\n/*\nconst animatePhrase = function (now, unit) {\n\tif (unit.contains(now)) {\n\t\tdocument.querySelector(\"#text_phrase\").textContent = unit.text;\n    text = unit.text;\n\t}\n};\n\n// 単語が発声されていたら #text_word に表示する\nconst animateWord = function (now, unit) {\n\tif (unit.contains(now)) {\n\t\tdocument.querySelector(\"#text_word\").textContent = unit.text;\n\t}\n};\n\n// 文字が発声されていたら #text_char に表示する\nconst animateChar = function (now, unit) {\n\tif (unit.contains(now)) {\n\t\tdocument.querySelector(\"#text_char\").textContent = unit.text;\n\t}\n};\n*/\nfunction onVideoSeekEnd() {\n\tconsole.log(\"シーク終了\");\n}\n\nfunction onTimerReady() {\n\tconsole.log(\"タイマー準備寛容\");\n\tisTimerReady = true;\n}\n\nfunction onDispose() {\n\tconsole.log(\"でぃすぽーずされますた\");\n}\n\nfunction onAppReady(app){\n\tisAppReady = true;\n\t//Loading Memories\n\t//player.createFromSongUrl(\"https://www.youtube.com/watch?v=ZOTJgXBkJpc\");\n\t//\"https://piapro.jp/t/RoPB/20220122172830\"\n\n\t//青に溶けた風船\n\t//player.createFromSongUrl(\"https://piapro.jp/t/9cSd/20220205030039\");\n\n\t//歌の欠片と\n\t//player.createFromSongUrl(\"https://www.youtube.com/watch?v=CkIy0PdUGjk\");\n\t//\"https://piapro.jp/t/Yvi-/20220207132910\"\n\n\t//未完のストーリー\n\t//player.createFromSongUrl(\"https://piapro.jp/t/ehtN/20220207101534\");\n\n\t//みはるかす\n\t//player.createFromSongUrl(\"https://www.youtube.com/watch?v=qVTavYjd9Ek\");\n\t//\"https://piapro.jp/t/QtjE/20220207164031\"\n\n\t//fear\n\t//player.createFromSongUrl(\"https://www.youtube.com/watch?v=ZK2rp1VdNy4\");\n\t//\"https://piapro.jp/t/GqT2/20220129182012\"\n\n\t//document.querySelector(\"#onAppReady\").textContent = \"準備完了\";\n\n}\n\n/*\ndocument.querySelector(\"#onVideoReady\").addEventListener(\"click\", () => {\n\tplayer.requestPlay();\n});\n*/\n\n/*\nlet timer = null;\nfunction onTimerReady(timer) {\n}\n*/\n\n\nlet phrases = null;\nlet sabi = null;\nlet songInfo = null;\nexport let chorus = null;\n// 動画データが読み込まれたとき\n// 楽曲情報を表示する。アニメーション関数を割り当てる。\nfunction onVideoReady(v){\n\tvideoEndTime = player.data.song.length　* 1000;\n  phrases = player.video.phrases;\n\tsongInfo = player.data.songMap.segments;\n\tconsole.log(songInfo);\n\t// サビ情報を読み取る\n\tvar segments_contenst = \"\";\n\t// for文でarrayをすべてたどる\n\t// https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/for...of\n\tfor(const element of player.data.songMap.segments){\n\t\tsegments_contenst = segments_contenst + String(element.chorus) + \"(\" + String(element.duration) + \" [ms]), \";\n\t\t//console.log(\"セグメント情報\");\n\t\t//console.log(element);\n\t\tif(element.chorus) {\n\t\t\tsabi = element;\n\t\t\tchorus = sabi.segments;\n\t\t}\n\t}\n\tconsole.log(\"れあでぃ\");\n\tisVideoReady = true;\n/*\n\tdocument.querySelector(\"#segments\").textContent = segments_contenst;\n\tdocument.querySelector(\"#song_name\").textContent = player.data.song.name;\n\tdocument.querySelector(\"#song_permalink\").textContent = player.data.song.permalink;\n\tdocument.querySelector(\"#song_artist\").textContent = player.data.song.artist.name;\n*/\n\t// 定期的に呼ばれる各フレーズの \"animate\" 関数をセットする\n\t/*\n\tlet w;\n\t// Set \"animate\" function\n  \tw = player.video.firstPhrase;\n  \twhile (w) {\n    \tw.animate = animatePhrase;\n    \tw = w.next;\n  \t}\n\t// 定期的に呼ばれる各単語の \"animate\" 関数をセットする\n  \t// Set \"animate\" function\n  \tw = player.video.firstWord;\n  \twhile (w) {\n    \tw.animate = animateWord;\n    \tw = w.next;\n  \t}\n\t// 定期的に呼ばれる各文字の \"animate\" 関数をセットする\n  \t// Set \"animate\" function\n  \tw = player.video.firstChar;\n  \twhile (w) {\n    \tw.animate = animateChar;\n    \tw = w.next;\n  \t}\n\t\t*/\n\t//document.querySelector(\"#onVideoReady\").textContent = \"準備完了\";\n}\n\n\n// 楽曲の再生位置が更新されたときに呼び出される。（再生中常に呼び出される）\n// index.htmlの各変数を随時更新する。\nfunction onTimeUpdate(position){\n\t/*\n\tdocument.querySelector(\"#position\").textContent = position;\n\tdocument.querySelector(\"#beat_index\").textContent = player.findBeat(position).index;\n\tdocument.querySelector(\"#beat_duration\").textContent = player.findBeat(position).duration;\n\tdocument.querySelector(\"#chord_index\").textContent = player.findChord(position).index;\n\tdocument.querySelector(\"#chord_duration\").textContent = player.findChord(position).duration;\n\tdocument.querySelector(\"#chorus_index\").textContent = player.findChorus(position).index;\n\tdocument.querySelector(\"#chorus_duration\").textContent = player.findChorus(position).duration;\n\tdocument.querySelector(\"#VA_A\").textContent = player.getValenceArousal(position).a;\n\tdocument.querySelector(\"#VA_V\").textContent = player.getValenceArousal(position).v;\n\tdocument.querySelector(\"#volume\").textContent = player.getVocalAmplitude(position);\n\tdocument.querySelector(\"#phrase\").textContent = player.video.findPhrase(position).text;\n\tdocument.querySelector(\"#word\").textContent = player.video.findWord(position).text;\n\tdocument.querySelector(\"#char\").textContent = player.video.findChar(position).text;\n\t*/\n}\n\nexport const canvasW = 4000;\nexport const canvasH = 4000;\nconst cameraSize = Math.min(window.innerWidth, window.innerHeight);\nexport const globalBlockSize = 100;\n\nexport const time_fadein = 100;\nexport const time_fadeout = 100;\nlet selectedSong;\n\n\nconst getPrelude = (phrases, thTime = 3000) => {\n\tif (phrases[0].startTime > thTime) {\n\t\treturn { 'startTime': 0, 'endTime': phrases[0].startTime - 1 };\n\t}\n}\n\nconst getInterludes = (phrases, thTime = 3000) => {\n\tlet index = 0;\n\tlet result = [];\n  for (let i = 0; i < phrases.length - 1; i++){\n    if (phrases[i + 1].startTime - phrases[i].endTime > thTime) {\n      result.push({ 'startTime': phrases[i].endTime + 1, 'endTime': phrases[i + 1].startTime - 1 });\n      index++;\n    }\n  }\n\treturn result;\n}\n\nconst getPostlude = (charBlock, thTime = 3000) => {\n\tif(videoEndTime - charBlock.slice(-1)[0]._endTime > thTime) {\n\t\treturn { 'startTime': charBlock.slice(-1)[0]._endTime + 1, 'endTime': videoEndTime };\n\t}\n}\n\nconst findInterlude = (position, interludes) => {\n\tfor(const i of interludes) {\n\t\tif(i['startTime'] <= position && position <= i['endTime']) return i;\n\t}\n\treturn false;\n}\n\nconst getDisplayedWords = (position, wordBlocks) => {\n\tlet words = [];\n\tfor(const w of wordBlocks) {\n\t\tif(w.startTime <= position) {\n\t\t\twords.push(w);\n\t\t}\n\t}\n\treturn words;\n}\n\nconst bgChange = (p5, position, endTime, duration = 1000, col = p5.color(60, 85, 100)) => {\n\tconst rectWidth = p5.width / 5;\n\tconst moveTime = Math.min(1, p5.map(endTime - position, duration, 0, 0, 1));\n\t//console.log(\"rectWidth : \" +rectWidth + \" moveTime : \"+moveTime);\n\tp5.noStroke();\n\tp5.fill(col);\n\tif(moveTime < 1) {\n\t\tfor(let i = 0; i < 5; i++) {\n\t\t\tp5.rect( (i * rectWidth) + (rectWidth / 2), p5.height / 2, rectWidth * Ease.quartIn(moveTime), p5.height );\n\t\t}\n\t}\n\treturn moveTime;\n}\n\nconst bgChange2 = (p5, position, endTime, duration = 1000, col = p5.color(60, 85, 100)) => {\n\tconst circleNum = 6;\n\tconst size = p5.width / 5;\n\tconst moveTime = Math.min(1, p5.map(endTime - position, duration, 0, 0, 1));\n\tp5.noStroke();\n\tp5.fill(col);\n\tfor(let y = 0; y < circleNum; y++) {\n\t\tfor(let x = 0; x < circleNum; x++) {\n\t\t\tp5.circle(x * size, y * size , (size * 2) * Ease.sineOut(moveTime));\n\t\t}\n\t}\n}\n\n/*\nconst postludeProcess = (p5, position, charBlock, duration = 3000) => {\n\tconst endTime = videoEndTime - duration;\n\tconst vanishCount = Math.min(charBlock.length, p5.map(endTime - position, duration, 0, 0, charBlock.length));\n\t//if(vanishCount == charBlock.length)\n\tfor(let i = 0; i < vanishCount; i++) {\n\t\twhile(true) {\n\t\t\tconst index = Math.floor(Math.random() * charBlock.length);\n\t\t\tif(!vanishedIndex.includes(index)) {\n\t\t\t\tcharBlock[index]._isDisplayed = false;\n\t\t\t\tvanishedIndex.push(index);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n*/\nnew P5((p5) => {\n  const u = 100;\n  const centerx = 300;\n  const centery = 300;\n  const block = 100;\n  const showGrid = true;\n  let b;\n  let b2;\n  let g;\n  let phraseBlocks;\n  let testBlocks;\n\tlet worldCamera;\n\tlet autoCamera;\n\tlet zoomCamera;\n\n\tlet myFont;\n\n\tlet isChorus = false;\n\tlet chorusList;\n\tlet currentChorus;\n\tlet chorusIndex = 0;\n\tlet chorusSize = { sizeX: 0, sizeY: 0, };\n\n\tlet wordBlocks;\n\tlet charBlocks;\n\n\tlet yarimasuta = true;\n\n\tconst balls = new Array();\n\tconst songlist = [\n      { artist: 'せきこみごはん', song: 'Loading Memories'},\n      { artist: 'シアン・キノ', song: '青に溶けた風船'},\n      { artist: 'IMO', song: '歌の欠片と'},\n      { artist: '加賀(ネギシャワーP)', song: '未完のストーリー'},\n      { artist: 'cat nap', song: 'みはるかす'},\n      { artist: '201', song: 'fear'},\n  ];\n\n\tlet prelude;\n\tlet isPrelude = false;\n\tlet interludes;\n\tlet interlude;\n\tlet isInterlude = false;\n\tlet postlude;\n\tlet isPostlude = false;\n\n\tlet bgColor;\n\tlet textColor;\n\n\tlet bgChangeTime = { endTime: 5000, };\n\n\tlet vanishedIndex = [];\n\n\tlet allDisplayedSize;\n\tp5.preload = () => {\n\t\t//myFont = p5.loadFont('./assets/MPLUSRounded1c-Light.ttf');\n\t}\n\n  p5.setup = () => {\n\t\t//let result = p5.createCanvas(window.innerWidth, window.innerHeight);\n\t\tlet result = p5.createCanvas(cameraSize, cameraSize);\n\t\tresult.parent(\"result\");\n\n\t\t//create select song element\n\t\tlet btnlist = p5.createDiv(`\n      <ul id=\"List\" class=\"list\">\n        <li class=\"item\">\n          <a id=\"LoadingMemories\", class=\"btn btn-gradient\"><span>LoadingMemories</span></a>\n        </li>\n        <li class=\"item\">\n          <a id=\"青に溶けた風船\", class=\"btn btn-gradient\"><span>青に溶けた風船</span></a>\n        </li>\n        <li class=\"item\">\n          <a id=\"歌の欠片と\", class=\"btn btn-gradient\"><span>歌の欠片と</span></a>\n        </li>\n        <li class=\"item\">\n          <a id=\"未完のストーリー\", class=\"btn btn-gradient\"><span>未完のストーリー</span></a>\n        </li>\n        <li class=\"item\">\n          <a id=\"みはるかす\", class=\"btn btn-gradient\"><span>みはるかす</span></a>\n        </li>\n        <li class=\"item\">\n          <a id=\"fear\", class=\"btn btn-gradient\"><span>fear</span></a>\n        </li>\n\n        <li class=\"item\">\n          <a id=\"play\", class=\"btn\"><span>Plese Select Song</span></a>\n        </li>\n      </ul>\n    `);\n    btnlist.id('btnlist');\n\t\tbtnlist = document.getElementById(\"btnlist\");\n\n\n    const btn1 = document.getElementById(\"LoadingMemories\");\n    const btn2 = document.getElementById(\"青に溶けた風船\");\n    const btn3 = document.getElementById(\"歌の欠片と\");\n    const btn4 = document.getElementById(\"未完のストーリー\");\n    const btn5 = document.getElementById(\"みはるかす\");\n    const btn6 = document.getElementById(\"fear\");\n    const playBtn = document.getElementById(\"play\");\n    const playText = playBtn.children[0];\n    const bs = document.getElementsByClassName(\"btn-gradient\");\n\n    for(const b of bs) {\n      b.style.width = cameraSize - 100;\n    }\n    playBtn.style.width = cameraSize - 100;\n\t\tconsole.log(bs);\n    const changeElement = (element, text) => {\n      playBtn.style.backgroundColor = '#3333FF';\n      playBtn.style.boxShadow = '0px 0px 0px 4px #FF0099';\n      playText.textContent = \"PLAY\";\n      for(const b of bs) {\n        b.style.backgroundColor = '#CCC';\n      }\n      element.style.backgroundColor = '#3399FF';\n      element.style.boxShadow = '0px 0px 0px 4px #3399FF';\n    };\n\n    btn1.addEventListener('click', () => {\n      console.log(\"LoadingMemories\");\n      selectedSong = SONG[\"Loading Memories / せきこみごはん feat. 初音ミク\"];\n      changeElement(btn1, \"LoadingMemories\");\n    });\n    btn2.addEventListener('click', () => {\n      console.log(\"青に溶けた風船\");\n      selectedSong = SONG[\"青に溶けた風船 / シアン・キノ feat. 初音ミク\"];\n      changeElement(btn2, \"青に溶けた風船\");\n    });\n    btn3.addEventListener('click', () => {\n      console.log(\"歌の欠片と\");\n\t\t\tselectedSong = SONG[\"歌の欠片と / imo feat. MEIKO\"];\n\t\t\tchangeElement(btn3, \"歌の欠片と\");\n    });\n    btn4.addEventListener('click', () => {\n\t\t  console.log(\"未完のストーリー\");\n\t\t\tselectedSong = SONG[\"未完のストーリー / 加賀（ネギシャワーP） feat. 初音ミク\"];\n      changeElement(btn4, \"未完のストーリー\");\n    });\n    btn5.addEventListener('click', () => {\n      console.log(\"みはるかす\");\n\t\t\tselectedSong = SONG[\"みはるかす / ねこむら（cat nap） feat. 初音ミク\"];\n      changeElement(btn5, \"みはるかす\");\n\t  });\n    btn6.addEventListener('click', () => {\n      console.log(\"fear\");\n\t\t\tselectedSong = SONG[\"fear / 201 feat. 初音ミク\"];\n      changeElement(btn6, \"fear\");\n    });\n    playBtn.addEventListener('click', () => {\n      console.log(\"PLAY\");\n\t\t\t//if(player.isPlaying || player.timer.isPlaying) return;\n      if(selectedSong) {\n\t\t\t\tplayer.createFromSongUrl(selectedSong.songUrl, { video: selectedSong.video });\n\t\t\t\t/*\n\t\t\t\tif(!init || !isTimerReady || player.isLoading) {\n\t\t\t\t\tplayText.textContent = \"Now Loading...\";\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(isTimerReady && !player.isPlaying && !player.timer.isPlaying) {\n\t\t\t\t\t//player.timer.initialize();\n\t\t\t\t\tplayer.video && player.requestPlay();\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tbtnlist.remove();\n\t\t\t\tconst playing = p5.createDiv(`\n\t\t\t\t\t<ul id=\"List\" class=\"list\">\n\t\t\t\t\t\t<li class=\"item\">\n\t\t\t\t\t\t\t<a id=\"Loaded\", class=\"btn btn-gradient\"><span>Start!</span></a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t`);\n\t\t\t\tplaying.id('playing');\n\t\t\t\tconst playingBtn = document.getElementById(\"Loaded\");\n\t\t\t\tplayingBtn.style.width = cameraSize;\n\n\t\t\t\tplayingBtn.addEventListener('click', () => {\n\t\t\t\t\tconsole.log(\"おされたんご\");\n\t\t      if(init && player.video && player.timer && isTimerReady) {\n\t\t\t\t\t\tplayer.requestPlay();\n\t\t\t\t\t\tplaying.remove();\n\t\t\t\t\t}\n\t\t    });\n      } else {\n\t\t\t\tplayText.textContent = \"選べカス\";\n\t\t\t}\n    });\n\t\t/*\n\t\tseekBar.addEventListener(\"change\", (e) => {\n      player.video && player.requestMediaSeek(e.target.value);\n    });\n\t\t*/\n\n\t\t//-------------------------------------------\n\n    p5.textFont('Monoton');\n    p5.rectMode(p5.CENTER);\n    p5.textAlign(p5.CENTER, p5.CENTER);\n\t\tp5.colorMode(p5.HSB, 100);\n\t\tp5.frameRate(60);\n\t\tworldCamera = new Camera(p5, canvasW, canvasH);\n    //g = new Grid(p5, canvasW, canvasH);\n    init = false;\n  };\n\n  p5.draw = () => {\n    //console.log(\"now drawing\");\n    if(!player || !player.video || !player.timer) {\n\t\t\t//console.log(\"ぷれいやー準備できてへん\");\n      return;\n    } else if(!init && isVideoReady){\n      console.log(\"---------Start initial draw------------\");\n\t\t\tg = new Grid(p5, canvasW, canvasH);\n\n      phraseBlocks = new Array(phrases.length);\n\t\t\twordBlocks = new Array();\n\n\t\t\tlet cou = 0;\n      let i = 0;\n\t\t\tlet test = new Array();\n\n\t\t\tfor(let cou = 0; cou < phrases.length; cou++) {\n\t\t\t\ttest.push(phrases[cou]);\n\t\t\t}\n\t\t\t//console.log(\"あああああああああああ\");\n\t\t\t//console.log(test);\n      testBlocks = new Array(test.length);\n      for(const p of test) {\n\t\t\t\t//console.log(p);\n        testBlocks[i] = new PhraseBlock(p5, g, p);\n        i++;\n      }\n\n\t\t\tconst blocks = new Array();\n\t\t\t//const wordBlocks = new Array();\n\t\t\tfor(const phrase of testBlocks) {\n\t\t\t\tfor(const word of phrase._wordBlocks) {\n\t\t\t\t\twordBlocks.push(word);\n\t\t\t\t\tfor(const char of word._blocks) {\n\t\t\t\t\t\tblocks.push(char);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconsole.log(wordBlocks);\n\t\t\tautoCamera = new AutoCamera(p5, blocks, canvasW, canvasH);\n\t\t\tzoomCamera = new ZoomCamera(p5, canvasW, canvasH);\n\n\t\t\tconsole.log(\"-----------End initial draw------------\");\n\t\t\tchorusList = sabi.segments;\n\t\t\tcurrentChorus = chorusList[chorusIndex];\n\t\t\tprelude = getPrelude(phrases);\n\t\t\tinterludes = getInterludes(phrases);\n\t\t\tpostlude = getPostlude(blocks);\n\t\t\tconsole.log(prelude);\n\t\t\tconsole.log(\"間奏情報\");\n\t\t\tconsole.log(interludes);\n\t\t\tconsole.log(postlude);\n\t\t\tbgColor = p5.color(0);\n\t\t\ttextColor = {'h': 0, 's': 0, 'b': 100};\n\n\t\t\tallDisplayedSize = g.getActiveGridSize(videoEndTime, wordBlocks);\n\t\t\tcharBlocks = blocks;\n      init = true;\n\n    }\n\n\t\t//-----------------------------------------------ここから繰り返しゾーン-----------------------------------------------\n\t\tconst position = player.timer.position;\n\t\tisPrelude = prelude && (prelude['startTime'] < position) && (position < prelude['endTime']);\n\t\tinterlude = findInterlude(position, interludes);\n\t\tisPostlude = postlude && (postlude['startTime'] < position);\n\t\tif(videoEndTime <= position) console.log(position);\n\t\t//if(interlude) console.log(interlude);\n\t\t//if(isPrelude || isInterlude || isPostlude) console.log(\"プレリュード : \" + isPrelude + \" インタールード : \" + isInterlude + \" ポストルード : \"+isPostlude);\n\n\t\tif(!isChorus && chorusIndex < chorusList.length && currentChorus.startTime < position + 500) {\n\t\t\tisChorus = true;\n\t\t\tconst res = g.getActiveGridSize(currentChorus.endTime, wordBlocks);\n\t\t\tchorusSize['sizeX'] = res['sizeX'];\n\t\t\tchorusSize['sizeY'] = res['sizeY'];\n\t\t\ttextColor = {'h': Math.floor(Math.random() * 100), 's': 100, 'b': 100 };\n\t\t\tconsole.log(\"サビです!!!!!!\");\n\t\t}\n\t\tif(isChorus && currentChorus.endTime < position) {\n\t\t\tisChorus = false;\n\t\t\tzoomCamera._isInit = true;\n\t\t\t//console.log(\"サビおわたっw\");\n\t\t\tchorusIndex++;\n\t\t\tcurrentChorus = chorusList[chorusIndex];\n\t\t\tbgColor = p5.color(0);\n\n\t\t}\n\n\t\t/*\n\t\tif(prelude && prelude['startTime'] < position && position < prelude['endTime']) {\n\t\t\tbgColor = 255;\n\t\t\ttextColor = p5.color(0, 0, 0);\n\t\t}\n\t\t*/\n\t\tif(isChorus) {\n\t\t\t//bgColor = p5.color(255);\n\t\t} else {\n\t\t\t//textColor = {'h': 0, 's': 0, 'b': 100 };\n\t\t}\n\n    p5.background(bgColor);\n\n\t\t/*\n\t\tif(position > bgChangeTime['endTime'] - 1000) {\n\t\t\t//console.log(\"バックグラウンド変えますやで\");\n\t\t\tconst mt = bgChange2(p5, position, bgChangeTime['endTime']);\n\t\t\tif(mt >= 1) bgColor = p5.color(60, 85, 100);\n\t\t}\n\t\t*/\n\n\t\tconst beat = player.findBeat(position);\n\t\tif(beat) {\n\t\t\tp5.push();\n\t\t\tp5.rectMode(p5.CORNER);\n\t\t\tconst progress = beat.progress(position);\n\t\t\tconst alpha = 80 * Ease.quintIn(progress);\n\t\t\tconst size = cameraSize * Ease.quintIn(progress);\n\t\t\tconst x = p5.width * Ease.quintIn(progress);\n\t\t\tp5.fill(60, 100, 100, alpha);\n\t\t\tp5.noStroke();\n\t\t\t//p5.strokeWeight(5);\n\t\t\t//p5.stroke(80, 100, 100, alpha);\n\t\t\tconst offset = 200;\n\t\t\tconst x1 = (p5.width / 2 - offset) * Ease.quintIn(progress);\n\t\t\tp5.rect(0, 0, (p5.width / 2 - offset) - x1, p5.height);\n\t\t\tp5.rect((p5.width / 2 + offset) + x1, 0, (p5.width / 2 - offset) - x1, p5.height);\n\t\t\t//p5.line(0, p5.height - 20, x, p5.height - 20);\n\t\t\t//p5.circle(p5.width / 2, p5.height / 2, size);\n\t\t\tp5.pop();\n\t\t}\n\n\n\t\t//カメラ移動\n\t\t/*\n\t\tif(p5.mouseIsPressed) {\n\t\t\t//console.log(\"タッチされました\" + \"worldCameraX is \"+worldCamera.pos.x+\"  mouseX is \"+p5.mouseX);\n\t\t\tworldCamera.posX = p5.mouseX;\n\t\t\tworldCamera.posY = p5.mouseY;\n\t\t}\n\t\t*/\n\n\t\t/*\n\t\tp5.translate(-worldCamera.posX, -worldCamera.posY);\n\t\tp5.scale(worldCamera.zoom);\n\t\t*/\n\n\t\t/*\n\t\tif(yarimasuta) {\n\t\t\tconst res = g.getActiveGridSize(currentChorus.endTime, wordBlocks);\n\t\t\tconsole.log(res);\n\t\t\tyarimasuta = false;\n\t\t}\n\t\t*/\n\n\t\t/*\n\t\tlet txt = \"\";\n\t\tlet segCount = 0;\n\t\tfor(const s of songInfo) {\n\t\t\tfor(let i = 0; i < s.segments.length; i++) {\n\t\t\t\tif(s.segments[i].startTime < position && position < s.segments[i].endTime) {\n\t\t\t\t\ttxt = 'セグメンツ ['+segCount+']の';\n\t\t\t\t\ttxt = txt + '['+i+']　番目の要素です。';\n\t\t\t\t}\n\t\t\t}\n\t\t\tsegCount++;\n\t\t}\n\t\tconsole.log(txt);\n\t\t*/\n\n\t\t//-----------------------------------------------ここからカメラゾーン-----------------------------------------------\n\t\tif(!interlude) {\n\t\t\tif(autoCamera.isInit) autoCamera._isInit = false;\n\t\t\tautoCamera.update(position, isChorus);\n\t\t} else {\n\t\t\tif(!autoCamera.isInit) autoCamera.init_interlude(position, interlude, getDisplayedWords(position, wordBlocks));\n\t\t\tautoCamera.update_interlude(position);\n\t\t}\n\t\tif(position && !isChorus && !isPostlude) {\n\t\t\tp5.translate(-(autoCamera._x - (cameraSize / 2)),  -(autoCamera._y - (cameraSize / 2)));\n/*\n\t\t\tif(interlude) {\n\t\t\t\tp5.rotate(p5.radians(autoCamera._angle));\n\t\t\t}\n\t\t\t*/\n\t\t\tp5.scale(autoCamera.zoom);\n\n\t\t} else {\n\t\t\tif(isChorus) {\n\t\t\t\tif(zoomCamera.isInit) {\n\t\t\t\t\tzoomCamera.setInit((autoCamera._x - (cameraSize / 2)), (autoCamera._y - (cameraSize / 2)), g.getActiveGridSize(currentChorus.endTime, wordBlocks), position, currentChorus.startTime);\n\t\t\t\t}\n\t\t\t\tzoomCamera.update(position);\n\t\t\t} else if(isPostlude) {\n\t\t\t\tif(zoomCamera.isInit) {\n\t\t\t\t\tzoomCamera.setInit((autoCamera._x - (cameraSize / 2)), (autoCamera._y - (cameraSize / 2)), g.getActiveGridSize(position, wordBlocks), position, position + 1000);\n\t\t\t\t}\n\t\t\t\tzoomCamera.update_postlude(position);\n\t\t\t}\n\n\t\t  p5.scale(zoomCamera.zoom);\n\t\t\tp5.translate(-zoomCamera.x, -zoomCamera.y);\n\t\t}\n\t\t//console.log(\"position : \" + position + \"  camera x : \"+autoCamera._x+ \"  y : \"+ autoCamera._y);\n\n\n\t\tif(isPostlude) {\n\t\t\tpostludeProcess(p5, position, charBlocks);\n\t\t}\n\t\t//-----------------------------------------------ここから図形描画ゾーン-----------------------------------------------\n    for(const phrase of testBlocks) {\n\t\t\tfor(const word of phrase._wordBlocks) {\n\t\t\t\tfor(const char of word._blocks) {\n\t\t\t\t\tif(isChorus) {\n\t\t\t\t\t\tif(char._startTime < position + 500 && position < char._endTime) {\n\t\t\t\t\t\t\tif(!char.isSetChorusPos) {\n\t\t\t\t\t\t\t\tchar.setChorusPos(chorusSize['sizeX'], chorusSize['sizeY']);\n\t\t\t\t\t\t\t\tballs.push(new Ball(p5, char._posX_chorus, char._posY_chorus));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchar.updateChorus_fadeIn(position);\n\t\t\t\t\t\t\tchar.displayChorusText();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(char._isVanished) continue;\n\t\t\t\t\tif(char._isDisplayed) {\n\t\t\t\t\t\t//char.update();\n\t\t\t\t\t\tchar.displayText();\n\t\t\t\t\t} else if(char._startTime < position + time_fadein) {\n\t\t\t\t\t\tchar._col = p5.color(textColor['h'], textColor['s'], textColor['b']);\n\t\t\t\t\t\tchar.update_fadein(position);\n\t\t\t\t\t\tchar.displayText();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(const b of balls) {\n\t\t\t//if(beat) b.update(beat.progress(position));\n\t\t\tb.drawMulti();\n\t\t}\n\n\t\tif(isPostlude) {\n\t\t\tp5.push();\n\t\t\tp5.noStroke();\n\t\t\tp5.blendMode(p5.SCREEN);\n\t\t\tp5.fill(p5.color(0, 0, 100));\n\t\t\tp5.textSize( (allDisplayedSize['sizeX'] * globalBlockSize) / selectedSong['title'].length );\n\t\t\tp5.text(selectedSong['title'], canvasW / 2, (canvasH / 2) - 400);\n\t\t\tp5.textSize( (allDisplayedSize['sizeX'] * globalBlockSize) / selectedSong['artist'].length );\n\t\t\tp5.text(selectedSong['artist'], canvasW / 2, (canvasH / 2) + 300);\n\t\t\tp5.pop();\n\t\t}\n\n    //g.displayPoint();\n    //drawGrid(p5, canvasW, canvasH);\n  };\n\n\tp5.mousePressed = () => {\n\t\tif(!player.isPlaying) return;\n\t\tconsole.log('マウス位置 : ' + p5.mouseX + ' / ' + p5.mouseY);\n\t\tconst posX = p5.mouseX + (autoCamera._x - (cameraSize / 2));\n\t\tconst posY = p5.mouseY + (autoCamera._y - (cameraSize / 2));\n\t\tconsole.log('キャリブレ後 : ' + posX + ' / ' + posY);\n\t\tconst selectGridPos = [Math.floor(posY / globalBlockSize), Math.floor(posX / globalBlockSize)];\n\t\tconsole.log('グリッドポジション : ' + selectGridPos[1] + ' / ' + selectGridPos[0]);\n\t\t//クリック位置から該当するブロックオブジェクトを探索\n\t\tfor(const w of wordBlocks) {\n\t\t\tfor(const pos of w._posInGrid) {\n\t\t\t\tif(pos.toString() === selectGridPos.toString()) {\n\t\t\t\t\tconsole.log(w.getText);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tconst postludeProcess = (p5, position, charBlock, duration = 3000) => {\n\t\tconst endTime = videoEndTime - duration;\n\t\tconst moveTime = Math.min(1, p5.map(endTime - position, duration, 0, 0, 1));\n\t\tconst vanishCount = Math.floor( charBlock.length * Ease.quintIn(moveTime) );\n\t\tfor(let i = 0; i < (vanishCount - vanishedIndex.length); i++) {\n\t\t\twhile(true) {\n\t\t\t\tconst index = Math.floor(Math.random() * charBlock.length);\n\t\t\t\tif(!vanishedIndex.includes(index)) {\n\t\t\t\t\tcharBlock[index]._isVanished = true;\n\t\t\t\t\tvanishedIndex.push(index);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t/*\n\tp5.keyPressed = (key) => {\n\t\tworldCamera.draw(key.key);\n\t};\n\n\tp5.mouseDragged = () => {\n\t\tworldCamera.posX = p5.mouseX;\n\t\tworldCamera.posY = p5.mouseY;\n\t};\n\t*/\n\n});\n\nclass Camera {\n  constructor(p5, canvasW, canvasH) {\n\t\tthis.p5 = p5;\n    this.pos = p5.createVector(0, 0);\n\t\tthis._zoom = 0.3;\n  }\n  draw(key) {\n    if (key == 'w') this.pos.y -= 50;\n    if (key == 's') this.pos.y += 50;\n    if (key == 'a') this.pos.x -= 50;\n    if (key == 'd') this.pos.x += 50;\n\t\tif (key == 'x') this._zoom *= 2;\n  }\n\tget posX() {\n\t\treturn this.pos.x;\n\t}\n\tget posY() {\n\t\treturn this.pos.y;\n\t}\n\tget zoom() {\n\t\treturn this._zoom;\n\t}\n\n\tset posX(num) {\n\t\tthis.pos.x += num - this.pos.x;\n\t}\n\tset posY(num) {\n\t\tthis.pos.y += num - this.pos.y;\n\t}\n}\n\nclass ZoomCamera {\n\tconstructor(p5, canvasW, canvasH) {\n\t\tthis.p = p5;\n\t\tthis.canvasW = canvasW;\n\t\tthis.canvasH = canvasH;\n\t\tthis._x = 0;\n\t\tthis._y = 0;\n\t\tthis._zoom = 0;\n\n\t\tthis.isInit = true;\n\t\tthis.distScale = 0;\n\t\tthis.distX = 0;\n\t\tthis.distY = 0;\n\t\tthis.startTime = 0;\n\t\tthis.endTime = 0;\n\t\tthis.preScale = 1;\n\n\t\tthis.zoomInit = false;\n\t}\n\n\tzoomInInit() {\n\t\tthis.startTime = Date.now();\n\t\tthis.preScale = this._zoom;\n\t\tthis.zoomInit = true;\n\t}\n\n\tzoomIn() {\n\t\tthis.moveTime = (Date.now() - this.startTime) / 500;\n\t\tthis._zoom = this.preScale + 1 * Ease.quintOut(this.moveTime);\n\t}\n\n\tupdateChorus(size) {\n\t\tconst xsize = cameraSize / (size['sizeX'] * globalBlockSize) * 1;\n\t\tconst ysize = cameraSize / (size['sizeY'] * globalBlockSize) * 1;\n\t\t//console.log('sizeX : ' + size['sizeX'] + '  sizeY : ' + size['sizeY']);\n\t\t//console.log('xsize : ' + xsize + '  ysize : ' + ysize);\n\n\t\tconst scale = xsize < ysize ? xsize : ysize;\n\t\t//console.log('スケール' + scale);\n\t\tthis._zoom = scale;\n\t\tthis._x = (canvasW / 2) - ((size['sizeX'] * globalBlockSize) / 2);\n\t\tthis._y = (canvasH / 2) - ((size['sizeY'] * globalBlockSize) / 2);\n\t\t//console.log(this._x + ' / ' + this._y);\n\t\t//console.log(window.innerWidth + ' / ' + window.innerHeight);\n\t}\n\n\tupdate(position) {\n\t\tif(position - this.startTime >= 500) return;\n\t\t//if(this._x == this.distX && this._y == this.distY && this._zoom == this.distScale) return;\n\t\tthis.moveTime = (position - this.startTime) / 500;\n\t\tthis._x = this.preX + (this.distX - this.preX) * Ease.quintOut(this.moveTime);\n\t\tthis._y = this.preY + (this.distY - this.preY) * Ease.quintOut(this.moveTime);\n\t\tthis._zoom = 1 - ( (1 - this.distScale) * Ease.quintOut(this.moveTime) );\n\t\tconsole.log('moveTime : '+this.moveTime+' x : '+this._x+' y : '+this._y+' zoom : '+this._zoom);\n\t}\n\n\tupdate_postlude(position) {\n\t\tif(position - this.startTime >= 1000) return;\n\t\tthis.moveTime = (position - this.startTime) / 1000;\n\t\tthis._x = this.preX + (this.distX - this.preX) * Ease.quintOut(this.moveTime);\n\t\tthis._y = this.preY + (this.distY - this.preY) * Ease.quintOut(this.moveTime);\n\t\tthis._zoom = 1 - ( (1 - this.distScale) * Ease.quintOut(this.moveTime) );\n\t\tconsole.log('moveTime : '+this.moveTime+' x : '+this._x+' y : '+this._y+' zoom : '+this._zoom);\n\t}\n\n\tsetInit(preX, preY, size, startTime, endTime) {\n\t\tthis.preX = preX;\n\t\tthis.preY = preY;\n\t\tconst xsize = cameraSize / (size['sizeX'] * globalBlockSize) * 1;\n\t\tconst ysize = cameraSize / (size['sizeY'] * globalBlockSize) * 1;\n\t\tconst scale = xsize < ysize ? xsize : ysize;\n\t\tthis.distScale = scale;\n\t\tthis.distX = (canvasW / 2) - ((size['sizeX'] * globalBlockSize) / 2);\n\t\tthis.distY = (canvasH / 2) - ((size['sizeY'] * globalBlockSize) / 2);\n\t\tthis.startTime = startTime;\n\t\tthis.endTime = endTime;\n\t\tthis.isInit = false;\n\t\tconsole.log(\"This is setInit /  preX : \"+this.preX+\" preY : \"+this.preY+\" distScale : \"+this.distScale+ \" distX : \"+this.distX + \" distY : \"+this.distY+\" startTime : \"+this.startTime + \" endTime : \"+this.endTime);\n\t}\n\n\tget x() {\n\t\treturn this._x;\n\t}\n\tget y() {\n\t\treturn this._y;\n\t}\n\tget zoom() {\n\t\treturn this._zoom;\n\t}\n\tget _zoomInit() {\n\t\treturn this.zoomInit;\n\t}\n\n\tset _isInit(bool) {\n\t\tthis.isInit = bool;\n\t}\n}\n\nclass AutoCamera {\n\tconstructor(p5, block, canvasW, canvasH) {\n\t\tthis.p = p5;\n\t\tthis.block = block;\n\t\tthis.canvasW = canvasW;\n\t\tthis.canvasH = canvasH;\n\t\tthis._zoom = 1.0;\n\t\tthis.index = 0;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.distX;\n\t\tthis.distY;\n\t\tthis.distSet();\n\t\tconsole.log(this.distX+\"  /  \" +this.distY);\n\t\tthis.preX = this.x;\n\t\tthis.preY = this.y;\n\t\t//this.preX = canvasW / 2;\n\t\t//this.preY = canvasH / 2;\n\n\t\tthis.startTime = 0;\n\t\tthis.moveTime = 0;\n\t\tthis.stopTime = 0;\n\t\tthis.isMove = true;\n\t\tthis.angle = 0;\n\t\tthis.moveLimit = this.block[this.index].startTime;\n\t\tconsole.log(\"limit is \" + this.moveLimit);\n\t\tthis.isEnd = false;\n\t\tthis.quickMove = false;\n\n\t\tthis.isInit = false;\n\t\tthis.angle = 0;\n\t\tthis.preAngle = 0;\n\t\tthis.distAngle = 0;\n\t}\n\n\tinit_interlude(position, interlude, displayedWords) {\n\t\tconst index = Math.floor(Math.random() * displayedWords.length);\n\t\tconsole.log(index);\n\t\tconsole.log(displayedWords);\n\t\tthis.distX = displayedWords[index]._posX;\n\t\tthis.distY = displayedWords[index]._posY;\n\t\tthis.preX = this.x;\n\t\tthis.preY = this.y;\n\t\tthis.startTime = interlude['startTime'];\n\t\t//this.endTime = interlude['endTime'];\n\t\tthis.moveLimit = interlude['endTime'] - interlude['startTime'];\n\t\tconst angle = displayedWords[index]._dir;\n\t\tconsole.log(displayedWords[index]._dir);\n\t\tswitch(angle) {\n      case 'N':\n        this.distAngle = 0;\n        break;\n      case 'S':\n        this.distAngle = 180;\n        break;\n      case 'E':\n        this.distAngle = 90;\n        break;\n      case 'W':\n        this.distAngle = 270;\n        break;\n    }\n\t\tthis.isInit = true;\n\t}\n\n\tupdate_interlude(position) {\n\t\tthis.moveTime = (position - this.startTime) / this.moveLimit;\n\t\tthis.x = this.preX + (this.distX - this.preX) * Ease.quintOut(this.moveTime);\n\t\tthis.y = this.preY + (this.distY - this.preY) * Ease.quintOut(this.moveTime);\n\t\tthis.angle = this.preAngle + this.distAngle * Ease.quintOut(this.moveTime);\n\t\t//console.log(\"angle : \"+this.angle + \"  ( distAngle : \"+this.distAngle+\" )\");\n\t}\n\n\tupdate(position, isChorus) {\n\t\t//console.log('カメラ : ' +this.x + ' / '+this.y);\n\t\t//console.log(\"テキスト : \" + this.block[this.index]._text);\n\n\t\t//console.log('dist : '+ this.distX + ' / '+this.distY);\n\t\t/*\n\t\tif(isChorus) {\n\t\t\tthis._zoom = 0.5;\n\t\t\tthis.x = (this.canvasW / 2) - window.innerWidth;\n\t\t\tthis.y = (this.canvasH / 2) - window.innerHeight;\n\t\t\treturn;\n\t\t}\n\t\t*/\n\t\tif(position < this.startTime) return;\n\t\tif(this.quickMove) {\n\t\t\tconsole.log(\"クイックムーブ！！！\")\n\t\t\tthis.x = this.block[this.index - 1]._posX;\n\t\t\tthis.y = this.block[this.index - 1]._posY;\n\t\t\t//this.x = this.distX;\n\t\t\t//this.y = this.distY;\n\t\t\tconsole.log(this.x + \"  \"+this.y);\n\t\t\tthis.quickMove = false;\n\t\t} else {\n\t\t\tthis.moveTime = (position - this.startTime) / this.moveLimit;\n\t\t\tthis.x = this.preX + (this.distX - this.preX) * Ease.quintOut(this.moveTime);\n\t\t\tthis.y = this.preY + (this.distY - this.preY) * Ease.quintOut(this.moveTime);\n\t\t}\n\t\t//console.log(\"thisX : \"+this.x + \"thisY : \"+this.y);\n\t\tif(position - this.startTime >= this.moveLimit) {\n\t\t\t//console.log(\"--------move limit !!!!-----------\");\n\t\t\t//console.log(\"x  : \"+this.x+\"  y : \"+this.y);\n\t\t\tthis.preX = this.x;\n\t\t\tthis.preY = this.y;\n\n\t\t\tthis.index++;\n\n\t\t\t//最後の要素\n\t\t\tif(this.index >= this.block.length) {\n\t\t\t\tconsole.log(\"伊豆エンド\");\n\t\t\t\tthis.isEnd = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.limitSet();\n\t\t\tthis.startTime = this.block[this.index].startTime;\n\t\t\tthis.distSet();\n\t\t\t//console.log(\"テキスト : \" + this.block[this.index]._text);\n\t\t\t//console.log(\"startTime : \" + this.startTime +\"next distX : \"+this.distX + \" distY : \"+this.distY+ \"moveLimit : \"+this.moveLimit);\n\t\t}\n\t}\n\n\tdistSet() {\n\t\tthis.distX = this.block[this.index]._posX;\n\t\tthis.distY = this.block[this.index]._posY;\n\t}\n\tlimitSet() {\n\t\tconst currentBlock = this.block[this.index];\n\t\t//console.log(\"EndTime : \"+currentBlock.endTime +\"  StartTime : \"+currentBlock.startTime);\n\t\tthis.moveLimit = currentBlock.endTime - currentBlock.startTime;\n\t\t/*\n\t\tif(this.moveLimit == 0) {\n\t\t\tthis.quickMove = true;\n\t\t}\n\t\t*/\n\n\t\t//movelimitが僅少のときスキップする\n\t\tif(this.moveLimit < 31) {\n\t\t\tlet limit = 0;\n\t\t\tlet tmpIndex = this.index;\n\t\t\twhile(limit == 0) {\n\t\t\t\tlet nextBlock = this.block[tmpIndex + 1];\n\t\t\t\tlimit = nextBlock.endTime - nextBlock.startTime;\n\t\t\t\ttmpIndex++;\n\t\t\t}\n\t\t\tthis.moveLimit = limit;\n\t\t\tthis.index = tmpIndex;\n\n\t\t\t//console.log(\"スキップするやで！！\")\n\t\t\t//console.log(\"preX : \"+this.preX+\"  preY : \"+this.preY+\"distX : \"+this.block[this.index]._posX + \"  distY : \"+this.block[this.index]._posY + \"  movelimit : \"+this.moveLimit);\n\t\t\tthis.quickMove = true;\n\n\t\t}\n\t}\n\n\tget _x() {\n\t\treturn this.x;\n\t}\n\tget _y() {\n\t\treturn this.y;\n\t}\n\tget zoom() {\n\t\treturn this._zoom;\n\t}\n\tget _angle() {\n\t\treturn this.angle;\n\t}\n\tget _isInit() {\n\t\treturn this.isInit;\n\t}\n\tset _isInit(bool) {\n\t\tthis.isInit = bool;\n\t}\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}